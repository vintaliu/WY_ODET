C51 COMPILER V9.59.0.0   FUNCTION                                                          09/26/2022 12:26:49 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE FUNCTION
OBJECT MODULE PLACED IN ..\OBJ\function.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE ..\Code\function.c OMF2 OPTIMIZE(8,SPEED) BROWSE INCDIR(..\Include) DEBU
                    -G PRINT(..\Listings\function.lst) TABS(2) OBJECT(..\OBJ\function.obj)

line level    source

   1          #include "SystemInit.h"
   2          #include "function.h"
   3          #include "intrins.h"
   4          #include "stdio.h"
   5          #include "Uart.h"
   6          #include "User_Def.h"
*** WARNING C318 IN LINE 15 OF \lwt-workspace\X2445°´¼ü°å-µ¥Æ¬»úêÉÎùÎ¢ 2.73K 45%Õ¼¿Õ±È\Include\MC51F003A4_COMMON.h: can'
             -t open file 'MC51F003A4.h'
   7          
   8          __O Flag SFR_interrupt_buff_H;
   9          __O Flag SFR_interrupt_buff_L;   //WH
  10          
  11          #define InDeBugMode
  12          unsigned int uiConvertTimes = 0;
  13          unsigned int uiMaxAd = 0;
  14          unsigned int uiMinAd = 0xFFFF;
  15          unsigned long l_gAdTemp = 0;              //unsigned long 32Î»
  16          unsigned int  uiAdVoltage = 0;
  17          
  18          unsigned char ucSpeedGrad;  //ËÙ¶È
  19          unsigned char GLOBAL_SPEED_GRAD = 1;  //È«¾ÖËÙ¶È
  20          
  21          
  22          unsigned char ucLessThanLowPower = FALSE; //µçÔ´µçÑ¹Ð¡ÓÚ23.740µÄ±êÖ¾
  23          unsigned char ucLess18Power = FALSE;      //µçÔ´µçÑ¹Ð¡ÓÚ18µÄ±êÖ¾
  24          unsigned char ucBuzzerPressedFlg = FALSE;    //·äÃùÆ÷°´ÏÂ±êÖ¾
  25          
  26          
  27          unsigned char ucKeyPressFlag = TRUE;
  28          unsigned char ucBuzzerTstFlg = FALSE; //·äÃùÆ÷²âÊÔ±êÖ¾
  29          //unsigned char //ucDebugSpeaker = 0;
  30          //unsigned char PowerOFF = FALSE; //¹Ø»ú±êÖ¾
  31          Peripheral_str strPeripheral;
  32          unsigned short usReadSpeakerPwm(void)
  33          {
  34   1          unsigned short usTemp = 0;
  35   1          SFRSL0 = 1;                          //ÇÐ»»SFR1
*** ERROR C202 IN LINE 35 OF ..\Code\function.c: 'SFRSL0': undefined identifier
  36   1          usTemp = PWM13DH << 8;
*** ERROR C202 IN LINE 36 OF ..\Code\function.c: 'PWM13DH': undefined identifier
  37   1          usTemp |= PWM13DL;
*** ERROR C202 IN LINE 37 OF ..\Code\function.c: 'PWM13DL': undefined identifier
  38   1          SFRSL0 = 0;                          //ÇÐ»»SFR0
*** ERROR C202 IN LINE 38 OF ..\Code\function.c: 'SFRSL0': undefined identifier
  39   1          return (usTemp);
  40   1      }
  41          void delay(unsigned long i)
  42          {
  43   1          while (i--);
  44   1      }
  45          
  46          /*******»ñµÃADµÄÖµ*******/
  47          unsigned int ADC_GetConversionValue(void)
  48          {
C51 COMPILER V9.59.0.0   FUNCTION                                                          09/26/2022 12:26:49 PAGE 2   

  49   1          unsigned int uiTemp = 0;
  50   1          uiTemp = (unsigned int)(ADRH << 8);
*** ERROR C202 IN LINE 50 OF ..\Code\function.c: 'ADRH': undefined identifier
  51   1          uiTemp |= ADRL;
*** ERROR C202 IN LINE 51 OF ..\Code\function.c: 'ADRL': undefined identifier
  52   1          CLR_ADEOC(); //Æô¶¯×ª»»
*** ERROR C202 IN LINE 52 OF ..\Code\function.c: 'ADCCR0': undefined identifier
  53   1          return uiTemp;
  54   1      }
  55          
  56          /*************´¦ÀíAD****************/
  57          void vDealAd(void)
  58          {
  59   1      #define DelaySetAdcRegTime 20
  60   1          unsigned int uiAdValue = 0;
  61   1      
  62   1          if(0 == (ADCCR0 & 0x02))return;
*** ERROR C202 IN LINE 62 OF ..\Code\function.c: 'ADCCR0': undefined identifier
  63   1      
  64   1          uiAdValue = ADC_GetConversionValue();
  65   1          uiConvertTimes++;
  66   1          if(uiAdValue > uiMaxAd)uiMaxAd = uiAdValue;
  67   1          if(uiAdValue < uiMinAd)uiMinAd = uiAdValue;
  68   1          l_gAdTemp += uiAdValue;
  69   1          if(ConverTimes == uiConvertTimes)
  70   1          {
  71   2              uiAdVoltage = (l_gAdTemp - uiMaxAd - uiMinAd) >> 2; //°Ñ6´Î²ÉÑùÖµ  ¼õÈ¥×î´ó¼õÈ¥×îÐ¡³ýÒÔ4
  72   2              uiMinAd = 0xFFFF;
  73   2              uiMaxAd = 0;
  74   2              l_gAdTemp = 0;
  75   2              uiConvertTimes = 0;
  76   2          }
  77   1      }
  78          #ifdef InDeBugMode
  79          //const unsigned char code uiAutoAddFactData[60] =
  80          //{
  81          //    0xEF, 0x0A, 0x1C, 0x07, 0x07, 0x07, 0x62, 0x32, 0x05, 0x07, 0x05, 0x05,
  82          //    0x05, 0x06, 0x14, 0x00, 0x00, 0x00, 0x00, 0x44, 0x14, 0x2D, 0x14, 0x00,
  83          //    0xE8, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x29, 0x00, 0x00, 0x00,
  84          //    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  85          //    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xAA, 0x55,
  86          //};
  87          const unsigned char code uiAutoAddFactData[60] =
  88          {
  89              0xEF, 0x0A, 0x00, 0x07, 0x07, 0x07, 0x62, 0x32, 0x05, 0x07, 0x05, 0x05,
  90              0x05, 0x06, 0x14, 0x00, 0x00, 0x00, 0x00, 0x44, 0x14, 0x2D, 0x14, 0x00,
  91              0xE8, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x29, 0x00, 0x00, 0x00,
  92              0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  93              0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xAA, 0x55,
  94          };
  95          #endif
  96          unsigned char ucDebugSwitch = 0;
  97          void vCheckFactData(void)
  98          {
  99   1          unsigned char uiCont = 0;
 100   1          unsigned char ucTemp = 0;
 101   1          unsigned char ucTempData = 0;
 102   1          uiCont = 0;
 103   1          for(ucTemp = 0; ucTemp < EEPROM_START_ADDRESS_FACT_PARE_Legth; ucTemp++)
 104   1          {
 105   2              ucTempData = ucEepromBuf[ucTemp] = EEPROM_Byte_Read(EEPROM_START_ADDRESS_FACT_PARE + ucTemp);
 106   2              if(0xFF == ucTempData)uiCont++;
C51 COMPILER V9.59.0.0   FUNCTION                                                          09/26/2022 12:26:49 PAGE 3   

 107   2      
 108   2          }
 109   1          //    uiCont = 51;//0x19B0
 110   1          if(uiCont > 50)
 111   1          {
 112   2              for(ucTemp = 0; ucTemp < 60; ucTemp++)ucEepromBuf[ucTemp] = 0;
 113   2      #ifdef InDeBugMode
 114   2              for(ucTemp = 0; ucTemp < 60; ucTemp++)ucEepromBuf[ucTemp] = uiAutoAddFactData[ucTemp];
 115   2      #endif
 116   2              //vWrite60Bytes();
 117   2              strPeripheral.ucRecvWrite60Bytes_Flag = 1;
 118   2          }
 119   1      
 120   1      }
 121          
 122          void Peripheral_Init(Peripheral_str *p)
 123          {
 124   1      
 125   1          p->Input.all = 0;
 126   1          p->Output.all = 0;
 127   1      
 128   1          p->SpeedDownKeyTime = 0;
 129   1          p->SpeedUpKeyTime = 0;
 130   1          p->SpeakerKeyTime = 0;
 131   1          p->AlarmTime = 0;
 132   1      
 133   1          p->BackSpeekTime = 0;
 134   1          p->PowerLEDShowTime = 0;
 135   1      
 136   1          p->ucPowerLedNum = 0;
 137   1          p->ucPowerLedShowPhase = 0;
 138   1      
 139   1          p->usRecvPowerON_Flag = 0;
 140   1          p->usRecvPowerOFF_Flag = 0;
 141   1      
 142   1          p->ucRecvData_Flag = 0;
 143   1          p->ucRecvPowerValue_Flag = 0;
 144   1          p->ucRecvWrite60Bytes_Flag = 0;
 145   1      
 146   1          p->ucRecvAlarmNum = 0;
 147   1          p->uiRecvPowerValue = 0;  //µçÁ¿
 148   1          p->ucRecvBikeInBack = FALSE;
 149   1          p->ucRecvOrderInCharge  = NO_USE; //ÊÇ·ñÔÚ³äµç
 150   1      
 151   1          p->ucRecvTestFlag  = FALSE;
 152   1      
 153   1      }
 154          /*****µÚÒ»´Î¿ª»ú£¬¿ª»ú»½ÐÑ*********/
 155          unsigned char ucBatType = 0;
 156          void vFirstStart(void)
 157          {
 158   1          vSysSourceInit();//ÏµÍ³³õÊ¼»¯
 159   1          delay(10);
 160   1          clr_EA;
*** ERROR C202 IN LINE 160 OF ..\Code\function.c: 'EA': undefined identifier
 161   1          GLOBAL_SPEED_GRAD = EEPROM_Byte_Read(SPEED_ADDRESS);;//¶ÁÈ¡FLASE ÖÐµÄÊý¾ÝÄÚÈÝ
 162   1          ucSpeedGrad = GLOBAL_SPEED_GRAD;
 163   1          EEPROM_Read(EEPROM_START_ADDRESS_FACT_PARE, ucEepromBuf, EEPROM_START_ADDRESS_FACT_PARE_Legth);
 164   1          set_EA;
*** ERROR C202 IN LINE 164 OF ..\Code\function.c: 'EA': undefined identifier
 165   1          ucBatType = EEPROM_Byte_Read(WriteBatteryTypeFlag_Addr);;//¶ÁÈ¡FLASE ÖÐµÄÊý¾ÝÄÚÈÝ
 166   1          if(0 == ucSpeedGrad)
C51 COMPILER V9.59.0.0   FUNCTION                                                          09/26/2022 12:26:49 PAGE 4   

 167   1          {
 168   2              ucSpeedGrad = 1;
 169   2          }
 170   1          else if((ucSpeedGrad >= 5) && (ucSpeedGrad < 100))
 171   1          {
 172   2              ucSpeedGrad = 5;
 173   2          }
 174   1          else if(ucSpeedGrad >= 100)//Èç¹û¿ª»úµÄÊ±ºòÊÇ0xFF
 175   1          {
 176   2              ucSpeedGrad = 1;
 177   2          }
 178   1      
 179   1          if((PowerOnSpeedGradeAt > 0) && (PowerOnSpeedGradeAt < 6))ucSpeedGrad = PowerOnSpeedGradeAt;
 180   1      
 181   1          ucLessThanLowPower = FALSE;
 182   1          ucLess18Power = FALSE;
 183   1          strPeripheral.ucRecvOrderInCharge = NO_USE;
 184   1          strPeripheral.ucRecvBikeInBack = FALSE;
 185   1          strPeripheral.uiRecvPowerValue = 0;
 186   1          Peripheral_Init(&strPeripheral);//²ÎÊý³õÊ¼»¯
 187   1          vCheckFactData();//¼ì²âÊý¾ÝÖ¡ÄÚÈÝ£¬Èç¹ûÃ»ÓÐÊý¾Ý×ÔÐÐÉÕÐ´Ò»´Î
 188   1      
 189   1          //////////////////////////////////ÒÔÏÂ½öÎªµ÷ÊÔÄ£Ê½ÏÂÓÐÐ§¹û
 190   1      #ifdef InDeBugMode
 191   1      //    strPeripheral.ucRecvData_Flag = 0x03;
 192   1      //    strPeripheral.uiRecvPowerValue = 40000;//µçÁ¿²»ÎªÁãÊ±²Å¼ì²â°´¼ü
 193   1      //    //
 194   1      //    SpeedLedOn(ucSpeedGrad);
 195   1      //    PowerLedOn(strPeripheral.uiRecvPowerValue); //ÏÔÊ¾µçÁ¿
 196   1          
 197   1      #endif
 198   1      
 199   1      }
 200          
 201          
 202          
 203          
 204          /*****ÏÔÊ¾µçÁ¿Ö¸Ê¾µÆ********/
 205          void PowerLedNumOn(unsigned char num)
 206          {
 207   1      
 208   1          switch (num)
 209   1          {
 210   2          case 0:
 211   2              POWER_SHOW_0;
*** ERROR C202 IN LINE 211 OF ..\Code\function.c: 'P21D': undefined identifier
*** ERROR C202 IN LINE 211 OF ..\Code\function.c: 'P24D': undefined identifier
*** ERROR C202 IN LINE 211 OF ..\Code\function.c: 'P27D': undefined identifier
*** ERROR C202 IN LINE 211 OF ..\Code\function.c: 'P26D': undefined identifier
*** ERROR C202 IN LINE 211 OF ..\Code\function.c: 'P10D': undefined identifier
 212   2              break;
 213   2          case 1:
 214   2              POWER_SHOW_1;
*** ERROR C202 IN LINE 214 OF ..\Code\function.c: 'P21D': undefined identifier
*** ERROR C202 IN LINE 214 OF ..\Code\function.c: 'P24D': undefined identifier
*** ERROR C202 IN LINE 214 OF ..\Code\function.c: 'P27D': undefined identifier
*** ERROR C202 IN LINE 214 OF ..\Code\function.c: 'P26D': undefined identifier
*** ERROR C202 IN LINE 214 OF ..\Code\function.c: 'P10D': undefined identifier
 215   2              break;
 216   2          case 2:
 217   2              POWER_SHOW_2;
*** ERROR C202 IN LINE 217 OF ..\Code\function.c: 'P21D': undefined identifier
C51 COMPILER V9.59.0.0   FUNCTION                                                          09/26/2022 12:26:49 PAGE 5   

*** ERROR C202 IN LINE 217 OF ..\Code\function.c: 'P24D': undefined identifier
*** ERROR C202 IN LINE 217 OF ..\Code\function.c: 'P27D': undefined identifier
*** ERROR C202 IN LINE 217 OF ..\Code\function.c: 'P26D': undefined identifier
*** ERROR C202 IN LINE 217 OF ..\Code\function.c: 'P10D': undefined identifier
 218   2              break;
 219   2          case 3:
 220   2              POWER_SHOW_3;
*** ERROR C202 IN LINE 220 OF ..\Code\function.c: 'P21D': undefined identifier
*** ERROR C202 IN LINE 220 OF ..\Code\function.c: 'P24D': undefined identifier
*** ERROR C202 IN LINE 220 OF ..\Code\function.c: 'P27D': undefined identifier
*** ERROR C202 IN LINE 220 OF ..\Code\function.c: 'P26D': undefined identifier
*** ERROR C202 IN LINE 220 OF ..\Code\function.c: 'P10D': undefined identifier
 221   2              break;
 222   2          case 4:
 223   2              POWER_SHOW_4;
*** ERROR C202 IN LINE 223 OF ..\Code\function.c: 'P21D': undefined identifier
*** ERROR C202 IN LINE 223 OF ..\Code\function.c: 'P24D': undefined identifier
*** ERROR C202 IN LINE 223 OF ..\Code\function.c: 'P27D': undefined identifier
*** ERROR C202 IN LINE 223 OF ..\Code\function.c: 'P26D': undefined identifier
*** ERROR C202 IN LINE 223 OF ..\Code\function.c: 'P10D': undefined identifier
 224   2              break;
 225   2          case 5:
 226   2              POWER_SHOW_5;
*** ERROR C202 IN LINE 226 OF ..\Code\function.c: 'P21D': undefined identifier
*** ERROR C202 IN LINE 226 OF ..\Code\function.c: 'P24D': undefined identifier
*** ERROR C202 IN LINE 226 OF ..\Code\function.c: 'P27D': undefined identifier
*** ERROR C202 IN LINE 226 OF ..\Code\function.c: 'P26D': undefined identifier
*** ERROR C202 IN LINE 226 OF ..\Code\function.c: 'P10D': undefined identifier
 227   2              break;
 228   2          default:
 229   2              break;
 230   2          }
 231   1      }
 232          
 233          /*******ÏÔÊ¾ËÙ¶ÈÖ¸Ê¾µÆ*************/
 234          void SpeedLedOn(unsigned char num)
 235          {
 236   1          switch (num)
 237   1          {
 238   2          case 1:
 239   2              SPEED_LED_1;
*** ERROR C202 IN LINE 239 OF ..\Code\function.c: 'P00D': undefined identifier
*** ERROR C202 IN LINE 239 OF ..\Code\function.c: 'P01D': undefined identifier
*** ERROR C202 IN LINE 239 OF ..\Code\function.c: 'P14D': undefined identifier
*** ERROR C202 IN LINE 239 OF ..\Code\function.c: 'P12D': undefined identifier
*** ERROR C202 IN LINE 239 OF ..\Code\function.c: 'P11D': undefined identifier
 240   2              break;
 241   2          case 2:
 242   2              SPEED_LED_2;
*** ERROR C202 IN LINE 242 OF ..\Code\function.c: 'P00D': undefined identifier
*** ERROR C202 IN LINE 242 OF ..\Code\function.c: 'P01D': undefined identifier
*** ERROR C202 IN LINE 242 OF ..\Code\function.c: 'P14D': undefined identifier
*** ERROR C202 IN LINE 242 OF ..\Code\function.c: 'P12D': undefined identifier
*** ERROR C202 IN LINE 242 OF ..\Code\function.c: 'P11D': undefined identifier
 243   2              break;
 244   2          case 3:
 245   2              SPEED_LED_3;
*** ERROR C202 IN LINE 245 OF ..\Code\function.c: 'P00D': undefined identifier
*** ERROR C202 IN LINE 245 OF ..\Code\function.c: 'P01D': undefined identifier
*** ERROR C202 IN LINE 245 OF ..\Code\function.c: 'P14D': undefined identifier
*** ERROR C202 IN LINE 245 OF ..\Code\function.c: 'P12D': undefined identifier
*** ERROR C202 IN LINE 245 OF ..\Code\function.c: 'P11D': undefined identifier
C51 COMPILER V9.59.0.0   FUNCTION                                                          09/26/2022 12:26:49 PAGE 6   

 246   2              break;
 247   2          case 4:
 248   2              SPEED_LED_4;
*** ERROR C202 IN LINE 248 OF ..\Code\function.c: 'P00D': undefined identifier
*** ERROR C202 IN LINE 248 OF ..\Code\function.c: 'P01D': undefined identifier
*** ERROR C202 IN LINE 248 OF ..\Code\function.c: 'P14D': undefined identifier
*** ERROR C202 IN LINE 248 OF ..\Code\function.c: 'P12D': undefined identifier
*** ERROR C202 IN LINE 248 OF ..\Code\function.c: 'P11D': undefined identifier
 249   2              break;
 250   2          case 5:
 251   2              SPEED_LED_5;
*** ERROR C202 IN LINE 251 OF ..\Code\function.c: 'P00D': undefined identifier
*** ERROR C202 IN LINE 251 OF ..\Code\function.c: 'P01D': undefined identifier
*** ERROR C202 IN LINE 251 OF ..\Code\function.c: 'P14D': undefined identifier
*** ERROR C202 IN LINE 251 OF ..\Code\function.c: 'P12D': undefined identifier
*** ERROR C202 IN LINE 251 OF ..\Code\function.c: 'P11D': undefined identifier
 252   2              break;
 253   2          default:
 254   2              break;
 255   2          }
 256   1      }
 257          
 258          void PowerLedOn(unsigned short power)    //unsigned shortÎª16Î»
 259          {
 260   1          if(power < 100)return;
 261   1          if (power < ALARM_POWER) ucLess18Power = TRUE;
 262   1          else ucLess18Power = FALSE;
 263   1      
 264   1          if (power <= LOW_POWER)
 265   1          {
 266   2              if(ucLessThanLowPower == FALSE)
 267   2              {
 268   3                  ucLessThanLowPower = TRUE;
 269   3                  POWER_SHOW_0;
*** ERROR C202 IN LINE 269 OF ..\Code\function.c: 'P21D': undefined identifier
*** ERROR C202 IN LINE 269 OF ..\Code\function.c: 'P24D': undefined identifier
*** ERROR C202 IN LINE 269 OF ..\Code\function.c: 'P27D': undefined identifier
*** ERROR C202 IN LINE 269 OF ..\Code\function.c: 'P26D': undefined identifier
*** ERROR C202 IN LINE 269 OF ..\Code\function.c: 'P10D': undefined identifier
 270   3              }
 271   2          }
 272   1          else if (power <= ONE_LED_POWER)
 273   1          {
 274   2              POWER_SHOW_1;
*** ERROR C202 IN LINE 274 OF ..\Code\function.c: 'P21D': undefined identifier
*** ERROR C202 IN LINE 274 OF ..\Code\function.c: 'P24D': undefined identifier
*** ERROR C202 IN LINE 274 OF ..\Code\function.c: 'P27D': undefined identifier
*** ERROR C202 IN LINE 274 OF ..\Code\function.c: 'P26D': undefined identifier
*** ERROR C202 IN LINE 274 OF ..\Code\function.c: 'P10D': undefined identifier
 275   2              ucLessThanLowPower = FALSE;
 276   2          }
 277   1          else if (power <= TWO_LED_POWER)
 278   1          {
 279   2              POWER_SHOW_2;
*** ERROR C202 IN LINE 279 OF ..\Code\function.c: 'P21D': undefined identifier
*** ERROR C202 IN LINE 279 OF ..\Code\function.c: 'P24D': undefined identifier
*** ERROR C202 IN LINE 279 OF ..\Code\function.c: 'P27D': undefined identifier
*** ERROR C202 IN LINE 279 OF ..\Code\function.c: 'P26D': undefined identifier
*** ERROR C202 IN LINE 279 OF ..\Code\function.c: 'P10D': undefined identifier
 280   2              ucLessThanLowPower = FALSE;
 281   2          }
 282   1          else if (power <= THREE_LED_POWER)
C51 COMPILER V9.59.0.0   FUNCTION                                                          09/26/2022 12:26:49 PAGE 7   

 283   1          {
 284   2              POWER_SHOW_3;
*** ERROR C202 IN LINE 284 OF ..\Code\function.c: 'P21D': undefined identifier
*** ERROR C202 IN LINE 284 OF ..\Code\function.c: 'P24D': undefined identifier
*** ERROR C202 IN LINE 284 OF ..\Code\function.c: 'P27D': undefined identifier
*** ERROR C202 IN LINE 284 OF ..\Code\function.c: 'P26D': undefined identifier
*** ERROR C202 IN LINE 284 OF ..\Code\function.c: 'P10D': undefined identifier
 285   2              ucLessThanLowPower = FALSE;
 286   2          }
 287   1          else if (power <= FOUR_LED_POWER)
 288   1          {
 289   2              POWER_SHOW_4;
*** ERROR C202 IN LINE 289 OF ..\Code\function.c: 'P21D': undefined identifier
*** ERROR C202 IN LINE 289 OF ..\Code\function.c: 'P24D': undefined identifier
*** ERROR C202 IN LINE 289 OF ..\Code\function.c: 'P27D': undefined identifier
*** ERROR C202 IN LINE 289 OF ..\Code\function.c: 'P26D': undefined identifier
*** ERROR C202 IN LINE 289 OF ..\Code\function.c: 'P10D': undefined identifier
 290   2              ucLessThanLowPower = FALSE;
 291   2          }
 292   1          else
 293   1          {
 294   2              POWER_SHOW_5;
*** ERROR C202 IN LINE 294 OF ..\Code\function.c: 'P21D': undefined identifier
*** ERROR C202 IN LINE 294 OF ..\Code\function.c: 'P24D': undefined identifier
*** ERROR C202 IN LINE 294 OF ..\Code\function.c: 'P27D': undefined identifier
*** ERROR C202 IN LINE 294 OF ..\Code\function.c: 'P26D': undefined identifier
*** ERROR C202 IN LINE 294 OF ..\Code\function.c: 'P10D': undefined identifier
 295   2              ucLessThanLowPower = FALSE;
 296   2          }
 297   1          if(TRUE == ucLessThanLowPower)//Ç·Ñ¹
 298   1          {
 299   2              if(strPeripheral.PowerLEDShowTime > TIMER_200MS)
 300   2              {
 301   3                  strPeripheral.PowerLEDShowTime = 0;
 302   3                  XorRedPowerLed;
*** ERROR C202 IN LINE 302 OF ..\Code\function.c: 'P21D': undefined identifier
 303   3                  if(ucLess18Power)//µçÑ¹µÍÓÚ18V
 304   3                  {
 305   4                      if ((!strPeripheral.ucRecvBikeInBack) && (!ucBuzzerTstFlg) && (!ucBuzzerPressedFlg) && (!s
             -trPeripheral.ucRecvAlarmNum))
 306   4                      {
 307   5                          switch(strPeripheral.ucPowerLedShowPhase)
 308   5                          {
 309   6                          case 0:
 310   6                              SetPWM1_Out(SpeedKeyTime, SpeedKeyPulse);
 311   6                              strPeripheral.ucPowerLedShowPhase = 1;
 312   6                              break;
 313   6                          case 1:
 314   6                              SetPWM1_Out(SpeedKeyTime, 0);//ucDebugSpeaker = 1;
 315   6                              strPeripheral.ucPowerLedShowPhase = 0;
 316   6                              break;
 317   6                          default:
 318   6                              SetPWM1_Out(SpeedKeyTime, 0);//ucDebugSpeaker = 2;
 319   6                              strPeripheral.ucPowerLedShowPhase = 0;
 320   6                              break;
 321   6                          }
 322   5                      }
 323   4                  }
 324   3                  else
 325   3                  {
 326   4                      SetPWM1_Out(SpeedKeyTime, 0);//ucDebugSpeaker = 3;
 327   4                      strPeripheral.ucPowerLedShowPhase = 0;
C51 COMPILER V9.59.0.0   FUNCTION                                                          09/26/2022 12:26:49 PAGE 8   

 328   4                  }
 329   3              }
 330   2      
 331   2          }
 332   1          else strPeripheral.PowerLEDShowTime = 0;
 333   1      }
 334          
 335          
 336          
 337          
 338          /*******°´µçÔ´¼ü¹Ø»ú****/
 339          void vPowerPressed(void)
 340          {
 341   1      
 342   1          if(TRUE == strPeripheral.usRecvPowerOFF_Flag)//½«ËÙ¶ÈÖµÐ´ÈëEEPROM
 343   1          {
 344   2              if(GLOBAL_SPEED_GRAD != ucSpeedGrad)
 345   2              {
 346   3                  EEPROM_WriteByte(SPEED_ADDRESS, ucSpeedGrad);
 347   3                  ucSpeedGrad = GLOBAL_SPEED_GRAD;
 348   3              }
 349   2              //      SPEED_LED_0;   //¹Ø±ÕËÙ¶ÈµÆ
 350   2              //      POWER_SHOW_0;  //¹Ø±ÕµçÔ´µÆ
 351   2              strPeripheral.usRecvPowerOFF_Flag = TRUE;
 352   2              strPeripheral.ucRecvData_Flag = FALSE;
 353   2          }
 354   1          //Èç¹ûÓÐµçÔ´¿ª»ú°´¼üµÄÊ±ºò¾ÍÈ¥ ´æ´¢°´¼üÖµ 20181224
 355   1          if(POWER_ON_KEY_PRESSED)
*** ERROR C202 IN LINE 355 OF ..\Code\function.c: 'P23D': undefined identifier
 356   1          {
 357   2              clr_EA;
*** ERROR C202 IN LINE 357 OF ..\Code\function.c: 'EA': undefined identifier
 358   2              if(GLOBAL_SPEED_GRAD != ucSpeedGrad)
 359   2              {
 360   3                  EEPROM_WriteByte(SPEED_ADDRESS, ucSpeedGrad);
 361   3                  ucSpeedGrad = GLOBAL_SPEED_GRAD;
 362   3              }
 363   2              set_EA;
*** ERROR C202 IN LINE 363 OF ..\Code\function.c: 'EA': undefined identifier
 364   2          }
 365   1      }
 366          
 367          
 368          /**************EEPROMÐ´ÈëÊý¾Ý***********/
 369          void EEPROM_WriteByte(unsigned int u16_addr, unsigned char u8_data)
 370          {
 371   1          EEPROM_Byte_Erase(u16_addr);
 372   1          EEPROM_Byte_Write(u16_addr, u8_data);
 373   1      }
 374          
 375          void vArom_WriteBytes_Fact(unsigned char *pData)//Ö±½ÓÐ´ÈëÒ»¸öÊý¾Ý ²»ÓÃÔÙ½»»»Êý¾ÝÁË
 376          {
 377   1      
 378   1          unsigned char i = 0;
 379   1          clr_EA;
*** ERROR C202 IN LINE 379 OF ..\Code\function.c: 'EA': undefined identifier
 380   1          for(i = 0; i < EEPROM_START_ADDRESS_FACT_PARE_Legth; i++)
 381   1          {
 382   2              EEPROM_WriteByte(EEPROM_START_ADDRESS_FACT_PARE + i, pData[i]);
 383   2          }
 384   1          set_EA;
*** ERROR C202 IN LINE 384 OF ..\Code\function.c: 'EA': undefined identifier
C51 COMPILER V9.59.0.0   FUNCTION                                                          09/26/2022 12:26:49 PAGE 9   

 385   1          set_ES;//ÔÙ´Î¿ªÆô ´®¿ÚÖÐ¶Ï
*** ERROR C202 IN LINE 385 OF ..\Code\function.c: 'IE1': undefined identifier
 386   1      }
 387          
 388          //void vArom_WriteBytes_Fact(unsigned char *pData)//Ö±½ÓÐ´ÈëÒ»¸öÊý¾Ý ²»ÓÃÔÙ½»»»Êý¾ÝÁË
 389          //{
 390          //    uint8_t cnt;
 391          //    uint16_t addr_60Byte = EEPROM_START_ADDRESS_FACT_PARE;
 392          //    clr_EA;
 393          //
 394          //    SET_IAPEN();
 395          //    SET_IAPEN(); //´ò¿ªFALSH IAP¹¦ÄÜ£¬Á¬ÐøÐ´Á½±éÓÐÐ§
 396          //    SET_EPAGEERS();
 397          //    SET_EPAGEERS(); //Ò³²ÁÄ£Ê½
 398          //    IAPKEY = 0x5a;
 399          //    IAPKEY = 0xa5;
 400          //    SET_IAPSTR(); //IAPSTRÎ»ÖÃÒ»£¬Æô¶¯IAP²Ù×÷
 401          //    for (cnt = 0; cnt < 61; cnt++)
 402          //    {
 403          //        IAPADH = addr_60Byte >> 8;
 404          //        IAPADL = addr_60Byte;
 405          //        IAPDB = 0;
 406          //        addr_60Byte++;
 407          //    }
 408          //    IAPKEY = 0x5a;
 409          //    IAPKEY = 0xa5;
 410          //    SET_IAPTRIG0(); //IAPTRIG0ÖÃÒ»
 411          //    IAPKEY = 0x5a;
 412          //    IAPKEY = 0xa5;
 413          //    SET_IAPTRIG1(); //IAPTRIG1ÖÃÒ»
 414          //    IAPKEY = 0x5a;
 415          //    IAPKEY = 0xa5;
 416          //    SET_IAPTRIG2(); //IAPTRIG1ÖÃÒ»
 417          //    while (IAPCR & 0x80);
 418          
 419          //    addr_60Byte = EEPROM_START_ADDRESS_FACT_PARE;
 420          
 421          //    SET_IAPEN();
 422          //    SET_IAPEN(); //´ò¿ªFALSH IAP¹¦ÄÜ£¬Á¬ÐøÐ´Á½±éÓÐÐ§
 423          //    SET_EPAGEWR();
 424          //    SET_EPAGEWR(); //Ò³Ð´Ä£Ê½
 425          //    IAPKEY = 0x5a;
 426          //    IAPKEY = 0xa5;
 427          //    SET_IAPSTR(); //IAPSTRÎ»ÖÃÒ»,Æô¶¯IAP²Ù×÷
 428          //    for (cnt = 0; cnt < 61; cnt++)
 429          //    {
 430          //        IAPADH = addr_60Byte >> 8;
 431          //        IAPADL = addr_60Byte;
 432          //        IAPDB = pData[cnt];
 433          //        addr_60Byte++;
 434          //    }
 435          //    IAPKEY = 0x5a;
 436          //    IAPKEY = 0xa5;
 437          //    SET_IAPTRIG0(); //IAPTRIG0ÖÃÒ»
 438          //    IAPKEY = 0x5a;
 439          //    IAPKEY = 0xa5;
 440          //    SET_IAPTRIG1(); //IAPTRIG1ÖÃÒ»
 441          //    IAPKEY = 0x5a;
 442          //    IAPKEY = 0xa5;
 443          //    SET_IAPTRIG2(); //IAPTRIG1ÖÃÒ»
 444          //    while (IAPCR & 0x80); //IAPSTR
 445          
C51 COMPILER V9.59.0.0   FUNCTION                                                          09/26/2022 12:26:49 PAGE 10  

 446          //    set_EA;
 447          //}
 448          /**********Ö÷¿ØÐ´Èë60×Ö½ÚÊý¾Ý**************/
 449          void vWrite60Bytes(void)
 450          {
 451   1          clr_EA;
*** ERROR C202 IN LINE 451 OF ..\Code\function.c: 'EA': undefined identifier
 452   1          vArom_WriteBytes_Fact(&ucEepromBuf[0]);
 453   1          set_EA;
*** ERROR C202 IN LINE 453 OF ..\Code\function.c: 'EA': undefined identifier
 454   1      }
 455          
 456          void vTestShowLed(unsigned int value)
 457          {
 458   1          //    if (value & 0x0001) POWER_SHOW1_ON;
 459   1          //    else POWER_SHOW1_OFF;
 460   1      
 461   1          //    if (value & 0x0002) POWER_SHOW2_ON;
 462   1          //    else POWER_SHOW2_OFF;
 463   1      
 464   1          //    if (value & 0x0004) POWER_SHOW3_ON;
 465   1          //    else POWER_SHOW3_OFF;
 466   1      
 467   1          //    if (value & 0x0008) POWER_SHOW4_ON;
 468   1          //
 469   1          //    else POWER_SHOW4_OFF;
 470   1      
 471   1          //    if (value & 0x0010) POWER_SHOW5_ON;
 472   1          //    else POWER_SHOW5_OFF;
 473   1      
 474   1          if (value & 0x0020) SPEED_STEP1_ON;
*** ERROR C202 IN LINE 474 OF ..\Code\function.c: 'P00D': undefined identifier
 475   1          else SPEED_STEP1_OFF;
*** ERROR C202 IN LINE 475 OF ..\Code\function.c: 'P00D': undefined identifier
 476   1      
 477   1          if (value & 0x0040) SPEED_STEP2_ON;
*** ERROR C202 IN LINE 477 OF ..\Code\function.c: 'P01D': undefined identifier
 478   1          else SPEED_STEP2_OFF;
*** ERROR C202 IN LINE 478 OF ..\Code\function.c: 'P01D': undefined identifier
 479   1      
 480   1          if (value & 0x0080) SPEED_STEP3_ON;//·½±ã²»¿ª»úµÄÊ±ºò  ¿ìËÙÇø·Ö°´¼ü°æ±¾µÄ²»Í¬
*** ERROR C202 IN LINE 480 OF ..\Code\function.c: 'P14D': undefined identifier
 481   1          else SPEED_STEP3_OFF;
*** ERROR C202 IN LINE 481 OF ..\Code\function.c: 'P14D': undefined identifier
 482   1      
 483   1          if (value & 0x0100) SPEED_STEP4_ON;
*** ERROR C202 IN LINE 483 OF ..\Code\function.c: 'P12D': undefined identifier
 484   1          else SPEED_STEP4_OFF;
*** ERROR C202 IN LINE 484 OF ..\Code\function.c: 'P12D': undefined identifier
 485   1      
 486   1          if (value & 0x0200)
 487   1          {
 488   2              SPEED_STEP5_ON;
*** ERROR C202 IN LINE 488 OF ..\Code\function.c: 'P11D': undefined identifier
 489   2          }
 490   1          else
 491   1          {
 492   2              SPEED_STEP5_OFF;
*** ERROR C202 IN LINE 492 OF ..\Code\function.c: 'P11D': undefined identifier
 493   2          }
 494   1      }
 495          
C51 COMPILER V9.59.0.0   FUNCTION                                                          09/26/2022 12:26:49 PAGE 11  

 496          void vInitLedPin(void)
 497          {
 498   1          POWER_SHOW_0;
*** ERROR C202 IN LINE 498 OF ..\Code\function.c: 'P21D': undefined identifier
*** ERROR C202 IN LINE 498 OF ..\Code\function.c: 'P24D': undefined identifier
*** ERROR C202 IN LINE 498 OF ..\Code\function.c: 'P27D': undefined identifier
*** ERROR C202 IN LINE 498 OF ..\Code\function.c: 'P26D': undefined identifier
*** ERROR C202 IN LINE 498 OF ..\Code\function.c: 'P10D': undefined identifier
 499   1          SPEED_LED_0;
*** ERROR C202 IN LINE 499 OF ..\Code\function.c: 'P00D': undefined identifier
*** ERROR C202 IN LINE 499 OF ..\Code\function.c: 'P01D': undefined identifier
*** ERROR C202 IN LINE 499 OF ..\Code\function.c: 'P14D': undefined identifier
*** ERROR C202 IN LINE 499 OF ..\Code\function.c: 'P12D': undefined identifier
*** ERROR C202 IN LINE 499 OF ..\Code\function.c: 'P11D': undefined identifier
 500   1          GPIO_Init();
 501   1      }
 502          
 503          void SetPWM1_Out(unsigned int x, unsigned int y)
 504          {
 505   1          SFRSL0 = 1;                          //ÇÐ»»SFR1
*** ERROR C202 IN LINE 505 OF ..\Code\function.c: 'SFRSL0': undefined identifier
 506   1      
 507   1          PWM1PH = (unsigned char)(x >> 8);
*** ERROR C202 IN LINE 507 OF ..\Code\function.c: 'PWM1PH': undefined identifier
 508   1          PWM1PL = (unsigned char)(x);
*** ERROR C202 IN LINE 508 OF ..\Code\function.c: 'PWM1PL': undefined identifier
 509   1          PWM13DH =  (unsigned char)(y >> 8);
*** ERROR C202 IN LINE 509 OF ..\Code\function.c: 'PWM13DH': undefined identifier
 510   1          PWM13DL =  (unsigned char)(y);
*** ERROR C202 IN LINE 510 OF ..\Code\function.c: 'PWM13DL': undefined identifier
 511   1      
 512   1          SFRSL0 = 0;                         //ÇÐ»»SFR0
*** ERROR C202 IN LINE 512 OF ..\Code\function.c: 'SFRSL0': undefined identifier
 513   1      }
 514          
 515          
 516          void Peripheral_GPIOInput(unsigned int  Voltage)
 517          {
 518   1          if(Globle_Timer_1MS.Bits.CheckKeyPress)
 519   1          {
 520   2              Globle_Timer_1MS.Bits.CheckKeyPress = 0;
 521   2              if(Voltage > 3350)//4096
 522   2              {
 523   3                  ucKeyPressFlag = FALSE;
 524   3                  strPeripheral.SpeedUpKeyTime = 0;
 525   3                  strPeripheral.SpeedDownKeyTime = 0;
 526   3                  strPeripheral.SpeakerKeyTime = 0;
 527   3                  strPeripheral.SpeedDownAndUpTime = 0;
 528   3                  strPeripheral.SpeakerAndSpeedUpTime = 0;
 529   3                  strPeripheral.Input.Bits.SpeedDownKeyPressFlag =  0;
 530   3      #ifdef EnableCancelBackCarAlarm
 531   3                  strPeripheral.Input.all &= 0xB0;
 532   3      #else         
                          strPeripheral.Input.all &= 0x30;
              #endif          
 535   3              }
 536   2              else if((FALSE == ucKeyPressFlag) && (Voltage < 3300) && (Voltage > 2819))//else if((FALSE == ucKe
             -yPressFlag) && (Voltage < 3300) && (Voltage > 2800))//+  //3300  2800  -->ADC as 2908  MC51F003  2940
 537   2              {
 538   3                  strPeripheral.SpeedUpKeyTime++;
 539   3                  strPeripheral.SpeedDownKeyTime = 0;
 540   3                  strPeripheral.SpeedDownAndUpTime = 0;
C51 COMPILER V9.59.0.0   FUNCTION                                                          09/26/2022 12:26:49 PAGE 12  

 541   3                  strPeripheral.Input.Bits.SpeedDownKeyPressFlag =  0;
 542   3                  if(strPeripheral.SpeedUpKeyTime > TIMER_20MS)
 543   3                  {
 544   4                      strPeripheral.SpeedUpKeyTime = TIMER_20MS;
 545   4                      strPeripheral.Input.Bits.SpeedUpKey = TRUE;
 546   4                      ucKeyPressFlag = TRUE;
 547   4                  }
 548   3              }
 549   2              else if((FALSE == ucKeyPressFlag) && (Voltage < 2715) && (Voltage > 2514))//else if((FALSE == ucKe
             -yPressFlag) && (Voltage < 2680) && (Voltage > 2450))//-  // 2750 2450   -->ADC as 2569    MC51F003 2590
 550   2              {
 551   3                  strPeripheral.SpeedUpKeyTime = 0;
 552   3                  strPeripheral.SpeedDownAndUpTime = 0;
 553   3                  strPeripheral.SpeedDownKeyTime++;
 554   3                  if(strPeripheral.SpeedDownKeyTime > TIMER_20MS)
 555   3                  {
 556   4                      strPeripheral.SpeedDownKeyTime = TIMER_20MS;
 557   4                      strPeripheral.Input.Bits.SpeedDownKey = TRUE;
 558   4                      strPeripheral.Input.Bits.SpeedDownKeyPressFlag = TRUE;
 559   4                      ucKeyPressFlag = TRUE;
 560   4                  }
 561   3              }
 562   2              else if((TRUE == strPeripheral.Input.Bits.SpeedDownKeyPressFlag) && (Voltage < 2435) && (Voltage >
             - 2265))//else if((TRUE == strPeripheral.Input.Bits.SpeedDownKeyPressFlag) && (Voltage < 2437) && (Voltage > 2237)) //+ -
             -  Í¬Ê±°´ÏÂ2450 2200  -->ADC as 2337    MC51F003  2355
 563   2              {
 564   3                  strPeripheral.SpeedDownAndUpTime++;  //±ØÐë°´¼ü¼õÏÈ°´ÏÂÈ¥
 565   3                  if(strPeripheral.SpeedDownAndUpTime > TIMER_4000MS)
 566   3                  {
 567   4                      strPeripheral.SpeedDownAndUpTime = TIMER_4000MS;
 568   4                      if(strPeripheral.Input.Bits.PowerChange == FALSE)//20190923ÐÞ¸ÄÇÐ»»µç³ØÀàÐÍ²»½øÐÐÐÞ¸Ä×î¸ßÊ
             -±ËÙÊ±
 569   4                          strPeripheral.Input.Bits.SpeedChange = TRUE;
 570   4                      ucKeyPressFlag = TRUE;
 571   4                      POWER_SHOW_5;
*** ERROR C202 IN LINE 571 OF ..\Code\function.c: 'P21D': undefined identifier
*** ERROR C202 IN LINE 571 OF ..\Code\function.c: 'P24D': undefined identifier
*** ERROR C202 IN LINE 571 OF ..\Code\function.c: 'P27D': undefined identifier
*** ERROR C202 IN LINE 571 OF ..\Code\function.c: 'P26D': undefined identifier
*** ERROR C202 IN LINE 571 OF ..\Code\function.c: 'P10D': undefined identifier
 572   4                      SPEED_LED_5;
*** ERROR C202 IN LINE 572 OF ..\Code\function.c: 'P00D': undefined identifier
*** ERROR C202 IN LINE 572 OF ..\Code\function.c: 'P01D': undefined identifier
*** ERROR C202 IN LINE 572 OF ..\Code\function.c: 'P14D': undefined identifier
*** ERROR C202 IN LINE 572 OF ..\Code\function.c: 'P12D': undefined identifier
*** ERROR C202 IN LINE 572 OF ..\Code\function.c: 'P11D': undefined identifier
 573   4                      SetPWM1_Out(SpeedKeyTime, SpeedKeyPulse);  //Êä³ö¿ØÖÆ·äÃùÆ÷½Ð
 574   4                  }
 575   3              }
 576   2              else if((Voltage < 2164) && (Voltage > 1944))//else if((Voltage < 2200) && (Voltage > 1900)) //205
             -4 À®°È2200 1900    -->ADC as 2049    MC51F003  2074
 577   2              {
 578   3                  strPeripheral.SpeakerKeyTime++;
 579   3                  strPeripheral.SpeedDownAndUpTime = 0;
 580   3                  strPeripheral.SpeakerAndSpeedUpTime = 0;
 581   3                  strPeripheral.Input.Bits.SpeedDownKeyPressFlag =  0;
 582   3                  if(strPeripheral.SpeakerKeyTime > TIMER_20MS)
 583   3                  {
 584   4                      strPeripheral.SpeakerKeyTime = TIMER_20MS;
 585   4                      strPeripheral.Input.Bits.SpeakerKey = TRUE;
 586   4                      //ucKeyPressFlag = TRUE;
 587   4                  }
C51 COMPILER V9.59.0.0   FUNCTION                                                          09/26/2022 12:26:49 PAGE 13  

 588   3              }
 589   2              else if((TRUE == strPeripheral.Input.Bits.SpeakerKey) && (Voltage < 1852) && (Voltage > 1680)) //e
             -lse if((TRUE == strPeripheral.Input.Bits.SpeakerKey) && (Voltage < 1900) && (Voltage > 1650)) //1706À®°È +  Í¬Ê±°´ÏÂ1900
             -  1650  -->ADC as1702    MC51F003  1722
 590   2              {
 591   3                  //±ØÐë°´¼ü¼ÓÏÈ°´ÏÂÈ¥
 592   3                  strPeripheral.SpeakerAndSpeedUpTime++;
 593   3                  if(strPeripheral.SpeakerAndSpeedUpTime > 1000)
 594   3                  {
 595   4                      strPeripheral.SpeakerAndSpeedUpTime = 1000;
 596   4                      strPeripheral.Input.Bits.SpeakerKey = FALSE;
 597   4                      ucKeyPressFlag = TRUE;
 598   4      
 599   4                      if((TRUE != strPeripheral.ucRecvOrderInCharge) && (0 == strPeripheral.ucRecvAlarmNum) && \
 600   4                              (strPeripheral.Input.Bits.SpeedModify == FALSE))//20190923ÐÞ¸ÄÇÐ»»×î¸ßÊ±ËÙÊ±²»½øÐÐ
             -ÐÞ¸Äµç³ØÀàÐÍ
 601   4                      {
 602   5                          if(strPeripheral.Input.Bits.PowerChange == FALSE)//20190807 ÐÞ¸Äµç³ØÀàÐÍ ÖØÐÂÉÏµçºóÓÐÐ
             -§
 603   5                          {
 604   6      
 605   6                              if((ucEepromBuf[2] & 0x40) == 0x40)//ï®µç³Ø
 606   6                              {
 607   7                                  ucEepromBuf[2] &= 0xBF;//Ç¦Ëá
 608   7                              }
 609   6                              else
 610   6                              {
 611   7                                  ucEepromBuf[2] |= 0x40; //ï®µç³Ø
 612   7                              }
 613   6                              vWrite60Bytes();
 614   6                              strPeripheral.Input.Bits.PowerChange = TRUE;
 615   6                              vSendLedStatus(strPeripheral.Input.all, ucEepromBuf[2]);
 616   6                          }
 617   5                          SetPWM1_Out(SpeedKeyTime, SpeedKeyPulse);
 618   5                          SpeedLedOn(ucSpeedGrad);
 619   5                          strPeripheral.Output.Bits.Alarm = TRUE;
 620   5                      }
 621   4                  }
 622   3              }
 623   2      #ifdef EnableCancelBackCarAlarm
 624   2              else if((TRUE == strPeripheral.Input.Bits.SpeakerKey) && (Voltage < 1650) && (Voltage > 1400)) //e
             -lse if((TRUE == strPeripheral.Input.Bits.SpeakerKey) && (Voltage < 1900) && (Voltage > 1650)) //1706À®°È +  Í¬Ê±°´ÏÂ1900
             -  1650  -->ADC as1702    MC51F003  1722
 625   2              {
 626   3                  //±ØÐë°´¼ü¼ÓÏÈ°´ÏÂÈ¥
 627   3                  strPeripheral.SpeedDownKeyTime++;
 628   3                  if(strPeripheral.SpeedDownKeyTime > 1000)
 629   3                  {
 630   4                      strPeripheral.SpeedDownKeyTime = 1000;
 631   4                      strPeripheral.Input.Bits.SpeakerKey = FALSE;
 632   4                      ucKeyPressFlag = TRUE;
 633   4      
 634   4                      if((TRUE != strPeripheral.ucRecvOrderInCharge) && (0 == strPeripheral.ucRecvAlarmNum) && \
 635   4                              (strPeripheral.Input.Bits.BackCarAlarmModify == FALSE))//20190923ÐÞ¸ÄÇÐ»»×î¸ßÊ±ËÙÊ
             -±²»½øÐÐÐÞ¸Äµç³ØÀàÐÍ
 636   4                      {
 637   5                          if(strPeripheral.Input.Bits.PowerChange == FALSE)//20190807 ÐÞ¸Äµç³ØÀàÐÍ ÖØÐÂÉÏµçºóÓÐÐ
             -§
 638   5                          {
 639   6                              if(ucEepromBuf[0])ucEepromBuf[0] = 0;//Èç¹ûÄÚÖÃÀ®°ÈÓÐÉùÏìÁË£¬¾Í²»ÒªÔÙÏìÁË
 640   6                              else ucEepromBuf[0] = 1;  //Èç¹ûÄÚÖÃÀ®°ÈÎÞÉùÏìÁË£¬ÔÙ´Î¿ªÆô
 641   6                              strPeripheral.Input.Bits.PowerChange = TRUE;
C51 COMPILER V9.59.0.0   FUNCTION                                                          09/26/2022 12:26:49 PAGE 14  

 642   6                              strPeripheral.Input.Bits.BackCarAlarmModify = TRUE;
 643   6                              vWrite60Bytes();
 644   6                          }
 645   5                          SetPWM1_Out(SpeedKeyTime, SpeedKeyPulse);
 646   5                          SpeedLedOn(ucSpeedGrad);
 647   5                          strPeripheral.Output.Bits.Alarm = TRUE;
 648   5                      }
 649   4                  }
 650   3              }
 651   2      #endif        
 652   2              //        else if((FALSE == ucKeyPressFlag) && (Voltage < 1650) && (Voltage > 1400)) //1584 À®°È -
             -  Í¬Ê±°´ÏÂ
 653   2              //        {//È¡ÏûÔ­À®°ÈÓëËÙ¶È¼õÒ»Æðµ÷½ÚËÙ¶È¹¦ÄÜ
 654   2              //            strPeripheral.SpeedDownKeyTime++;
 655   2              //            if(strPeripheral.SpeedDownKeyTime > TIMER_100MS)
 656   2              //            {
 657   2              //                strPeripheral.SpeedDownKeyTime = TIMER_100MS;
 658   2              //                strPeripheral.Input.Bits.SpeedChange = FALSE;
 659   2              //                strPeripheral.Input.Bits.SpeakerKey = FALSE;
 660   2              //                ucKeyPressFlag = TRUE;
 661   2              //            }
 662   2              //        }
 663   2              else if(Voltage <  1400) //Í¬Ê±°´ÏÂ
 664   2              {
 665   3                  if(strPeripheral.Input.Bits.SpeakerKey)
 666   3                  {
 667   4                      strPeripheral.Input.Bits.SpeakerKey = FALSE;
 668   4                  }
 669   3              }
 670   2              /*if(strPeripheral.Input.Bits.SpeakerKey)
 671   2              {
 672   2                  if(Voltage > 300)
 673   2                  {
 674   2                    strPeripheral.Input.Bits.SpeakerKey = FALSE;
 675   2                  }
 676   2              }
 677   2              if(Voltage < 300)
 678   2              {
 679   2                  strPeripheral.SpeakerKeyTime++;
 680   2                  if(strPeripheral.SpeakerKeyTime > TIMER_10MS)
 681   2                  {
 682   2                      strPeripheral.SpeakerKeyTime = TIMER_10MS;
 683   2                      strPeripheral.Input.Bits.SpeakerKey = TRUE;
 684   2                  }
 685   2              }*/
 686   2          }
 687   1      }
 688          
 689          void PeripheralInputHandle(void)
 690          {
 691   1      
 692   1          Peripheral_GPIOInput(uiAdVoltage);
 693   1      
 694   1      
 695   1          if(strPeripheral.Input.Bits.SpeedUpKey)
 696   1          {
 697   2              if ( (TRUE != strPeripheral.ucRecvOrderInCharge) && (0 == strPeripheral.ucRecvAlarmNum))
 698   2              {
 699   3                  strPeripheral.Input.Bits.SpeedUpKey = 0;
 700   3                  ucSpeedGrad++;
 701   3                  if(ucSpeedGrad > 5)
 702   3                  {
C51 COMPILER V9.59.0.0   FUNCTION                                                          09/26/2022 12:26:49 PAGE 15  

 703   4                      ucSpeedGrad = 5;
 704   4                      SetPWM1_Out(SpeedKeyLimitTime, SpeedKeyLimitPulse);
 705   4                      if(strPeripheral.Input.Bits.SpeedModify)//20190807 ÐÞ¸Ä×î¸ßÊ±ËÙ ÖØÐÂÉÏµçºóÓÐÐ§
 706   4                      {
 707   5                          ucEepromBuf[6] = 87;
 708   5                          vWrite60Bytes();
 709   5                      }
 710   4                  }
 711   3                  else
 712   3                  {
 713   4                      SetPWM1_Out(SpeedKeyTime, SpeedKeyPulse);
 714   4                      SpeedLedOn(ucSpeedGrad);
 715   4                      if(strPeripheral.Input.Bits.SpeedModify)//20190807 ÐÞ¸Ä×î¸ßÊ±ËÙ ÖØÐÂÉÏµçºóÓÐÐ§
 716   4                      {
 717   5                          if(ucEepromBuf[6] < 87)
 718   5                          {
 719   6                              ucEepromBuf[6] += 10;
 720   6                          }
 721   5                          vWrite60Bytes();
 722   5                          vSendLedStatus(strPeripheral.Input.all, ucEepromBuf[6]);
 723   5                      }
 724   4                      else vSendSpeedGrad(ucSpeedGrad);
 725   4                  }
 726   3                  strPeripheral.Output.Bits.Alarm = TRUE;
 727   3      
 728   3              }
 729   2              else strPeripheral.Input.Bits.SpeedUpKey = 0;
 730   2          }
 731   1          if(strPeripheral.Input.Bits.SpeedDownKey)
 732   1          {
 733   2              strPeripheral.Input.Bits.SpeedDownKey = 0;
 734   2      
 735   2              if((TRUE != strPeripheral.ucRecvOrderInCharge) && (0 == strPeripheral.ucRecvAlarmNum))
 736   2              {
 737   3                  ucSpeedGrad--;
 738   3                  if(0 == ucSpeedGrad)
 739   3                  {
 740   4                      ucSpeedGrad = 1;
 741   4                      SetPWM1_Out(SpeedKeyLimitTime, SpeedKeyLimitPulse);
 742   4                      if(strPeripheral.Input.Bits.SpeedModify)//20190807 ÐÞ¸Ä×î¸ßÊ±ËÙ ÖØÐÂÉÏµçºóÓÐÐ§
 743   4                      {
 744   5                          ucEepromBuf[6] = 47;
 745   5                          vWrite60Bytes();
 746   5                      }
 747   4                  }
 748   3                  else
 749   3                  {
 750   4                      SetPWM1_Out(SpeedKeyTime, SpeedKeyPulse);
 751   4                      SpeedLedOn(ucSpeedGrad);
 752   4      
 753   4                      if(strPeripheral.Input.Bits.SpeedModify)//20190807 ÐÞ¸Ä×î¸ßÊ±ËÙ ÖØÐÂÉÏµçºóÓÐÐ§
 754   4                      {
 755   5                          if(ucEepromBuf[6] > 47)
 756   5                          {
 757   6                              ucEepromBuf[6] -= 10;
 758   6                          }
 759   5                          vWrite60Bytes();
 760   5                          vSendLedStatus(strPeripheral.Input.all, ucEepromBuf[6]);
 761   5                      }
 762   4                      else vSendSpeedGrad(ucSpeedGrad);
 763   4                  }
 764   3                  strPeripheral.Output.Bits.Alarm = TRUE;
C51 COMPILER V9.59.0.0   FUNCTION                                                          09/26/2022 12:26:49 PAGE 16  

 765   3      
 766   3              }
 767   2              else strPeripheral.Input.Bits.SpeedDownKey = 0;
 768   2          }
 769   1          if(strPeripheral.Input.Bits.SpeedChange)//ÐÞ¸Ä×î¸ßÊ±ËÙ
 770   1          {
 771   2              if(0 == strPeripheral.ucRecvAlarmNum)
 772   2              {
 773   3      
 774   3                  if(ucEepromBuf[6] >= 87)
 775   3                  {
 776   4                      ucSpeedGrad = 5;
 777   4                      ucEepromBuf[6] = 87;
 778   4                  }
 779   3                  else if(ucEepromBuf[6] <= 47)
 780   3                  {
 781   4                      ucSpeedGrad = 1;
 782   4                      ucEepromBuf[6] = 47;
 783   4                  }
 784   3                  else if(ucEepromBuf[6] <= 57)
 785   3                  {
 786   4                      ucSpeedGrad = 2;
 787   4                      ucEepromBuf[6] = 57;
 788   4                  }
 789   3                  else if(ucEepromBuf[6] <= 67)
 790   3                  {
 791   4                      ucSpeedGrad = 3;
 792   4                      ucEepromBuf[6] = 67;
 793   4                  }
 794   3                  else if(ucEepromBuf[6] <= 77)
 795   3                  {
 796   4                      ucSpeedGrad = 4;
 797   4                      ucEepromBuf[6] = 77;
 798   4                  }
 799   3                  SetPWM1_Out(SpeedKeyTime, SpeedKeyPulse);
 800   3                  SpeedLedOn(ucSpeedGrad);
 801   3      
 802   3                  strPeripheral.Input.Bits.SpeedChange = 0;
 803   3                  strPeripheral.Input.Bits.SpeedModify = 1;
 804   3                  strPeripheral.ucPowerLedNum = 0;
 805   3                  strPeripheral.Output.Bits.Alarm = TRUE;
 806   3                  vSendLedStatus(strPeripheral.Input.all, ucEepromBuf[6]);
 807   3              }
 808   2              else
 809   2              {
 810   3                  strPeripheral.Input.Bits.SpeedChange = 0;
 811   3                  strPeripheral.Input.Bits.SpeedModify = 0;
 812   3              }
 813   2          }
 814   1          if(strPeripheral.Input.Bits.SpeakerKey)
 815   1          {
 816   2              if (TRUE != strPeripheral.ucRecvOrderInCharge)
 817   2              {
 818   3                  strPeripheral.Output.Bits.Alarm = TRUE;
 819   3                  SetPWM1_Out(LabaKeyPressSpeekTime, LabaKeyPressSpeekPulse);
 820   3                  if(FALSE == ucBuzzerPressedFlg)vSendBuzzerOrder(0x01);
 821   3                  ucBuzzerPressedFlg = TRUE;
 822   3              }
 823   2          }
 824   1          else
 825   1          {
 826   2              if(TRUE == ucBuzzerPressedFlg) vSendBuzzerOrder(0x02);
C51 COMPILER V9.59.0.0   FUNCTION                                                          09/26/2022 12:26:49 PAGE 17  

 827   2              ucBuzzerPressedFlg = FALSE;
 828   2          }
 829   1          //    }
 830   1      }
 831          
 832          //unsigned char strPeripheral.ucPowerLedShowPhase = 0;
 833          char ucBackSpeekFlag = FALSE;
 834          char ucBeep_Alarm_Phase = 0;
 835          char ucBeep_Alarm_Num = 0;
 836          //char ucTestBeep = 0;
 837          void PeripheralOutputHandle(void)
 838          {
 839   1          /*******µçÔ´µÆ*******/
 840   1          if(Globle_Timer_1MS.Bits.PowerOn)
 841   1          {
 842   2              Globle_Timer_1MS.Bits.PowerOn = 0;
 843   2              if(strPeripheral.PowerLEDShowTime <= TIMER_1S)
 844   2              {
 845   3                  strPeripheral.PowerLEDShowTime++;
 846   3              }
 847   2              else strPeripheral.PowerLEDShowTime = 0;
 848   2      
 849   2              //////////////////////////////////////
 850   2          }
 851   1          /*******¼ì²âÊÇ·ñÐ´EEPROM*******/
 852   1          if(strPeripheral.ucRecvWrite60Bytes_Flag)
 853   1          {
 854   2              if(strPeripheral.PowerLEDShowTime > TIMER_200MS)
 855   2              {
 856   3                  strPeripheral.PowerLEDShowTime = 0;
 857   3                  switch(strPeripheral.ucPowerLedShowPhase)
 858   3                  {
 859   4                  case 0:
 860   4                      SPEED_LED_0;
*** ERROR C202 IN LINE 860 OF ..\Code\function.c: 'P00D': undefined identifier
*** ERROR C202 IN LINE 860 OF ..\Code\function.c: 'P01D': undefined identifier
*** ERROR C202 IN LINE 860 OF ..\Code\function.c: 'P14D': undefined identifier
*** ERROR C202 IN LINE 860 OF ..\Code\function.c: 'P12D': undefined identifier
*** ERROR C202 IN LINE 860 OF ..\Code\function.c: 'P11D': undefined identifier
 861   4                      POWER_SHOW_0;
*** ERROR C202 IN LINE 861 OF ..\Code\function.c: 'P21D': undefined identifier
*** ERROR C202 IN LINE 861 OF ..\Code\function.c: 'P24D': undefined identifier
*** ERROR C202 IN LINE 861 OF ..\Code\function.c: 'P27D': undefined identifier
*** ERROR C202 IN LINE 861 OF ..\Code\function.c: 'P26D': undefined identifier
*** ERROR C202 IN LINE 861 OF ..\Code\function.c: 'P10D': undefined identifier
 862   4                      SetPWM1_Out(SpeedKeyTime, 0);//ucDebugSpeaker = 4;
 863   4                      strPeripheral.ucPowerLedShowPhase = 1;
 864   4                      vWrite60Bytes();
 865   4                      strPeripheral.ucPowerLedNum = 5;
 866   4                      break;
 867   4                  case 1:
 868   4                      if(strPeripheral.ucPowerLedNum > 0)
 869   4                      {
 870   5                          PowerLedNumOn(strPeripheral.ucPowerLedNum--);
 871   5                          SetPWM1_Out(SpeedKeyTime, SpeedKeyPulse);
 872   5                      }
 873   4                      else strPeripheral.ucPowerLedShowPhase = 2;
 874   4                      break;
 875   4                  case 2:
 876   4                      SetPWM1_Out(SpeedKeyTime, 0);//ucDebugSpeaker = 5;
 877   4                      POWER_SHOW_0;  //¹Ø±ÕµçÔ´µÆ
*** ERROR C202 IN LINE 877 OF ..\Code\function.c: 'P21D': undefined identifier
C51 COMPILER V9.59.0.0   FUNCTION                                                          09/26/2022 12:26:49 PAGE 18  

*** ERROR C202 IN LINE 877 OF ..\Code\function.c: 'P24D': undefined identifier
*** ERROR C202 IN LINE 877 OF ..\Code\function.c: 'P27D': undefined identifier
*** ERROR C202 IN LINE 877 OF ..\Code\function.c: 'P26D': undefined identifier
*** ERROR C202 IN LINE 877 OF ..\Code\function.c: 'P10D': undefined identifier
 878   4                      SpeedLedOn(ucSpeedGrad);  //ÏÔÊ¾ËÙ¶È
 879   4                      strPeripheral.ucPowerLedShowPhase = 0;
 880   4                      strPeripheral.ucRecvWrite60Bytes_Flag = 0;
 881   4                      break;
 882   4                  default:
 883   4                      SetPWM1_Out(SpeedKeyTime, 0);//ucDebugSpeaker = 6;
 884   4                      strPeripheral.ucPowerLedShowPhase = 0;
 885   4                      strPeripheral.ucRecvWrite60Bytes_Flag = 0;
 886   4                      break;
 887   4                  }
 888   3              }
 889   2          }
 890   1          else if(0x03 == strPeripheral.ucRecvData_Flag)    //´®¿ÚÍ¨ÐÅ¸³Öµ0X03
 891   1          {
 892   2              if(TRUE == strPeripheral.usRecvPowerON_Flag)   //  Ôö¼ÓÒ»¸ö¿ª»úÃüÁî
 893   2              {
 894   3                  if(strPeripheral.PowerLEDShowTime >= TIMER_100MS)
 895   3                  {
 896   4                      strPeripheral.PowerLEDShowTime = 0;
 897   4                      switch(strPeripheral.ucPowerLedShowPhase)
 898   4                      {
 899   5                      case 0:
 900   5                          POWER_SHOW_0;
*** ERROR C202 IN LINE 900 OF ..\Code\function.c: 'P21D': undefined identifier
*** ERROR C202 IN LINE 900 OF ..\Code\function.c: 'P24D': undefined identifier
*** ERROR C202 IN LINE 900 OF ..\Code\function.c: 'P27D': undefined identifier
*** ERROR C202 IN LINE 900 OF ..\Code\function.c: 'P26D': undefined identifier
*** ERROR C202 IN LINE 900 OF ..\Code\function.c: 'P10D': undefined identifier
 901   5                          SPEED_LED_0;
*** ERROR C202 IN LINE 901 OF ..\Code\function.c: 'P00D': undefined identifier
*** ERROR C202 IN LINE 901 OF ..\Code\function.c: 'P01D': undefined identifier
*** ERROR C202 IN LINE 901 OF ..\Code\function.c: 'P14D': undefined identifier
*** ERROR C202 IN LINE 901 OF ..\Code\function.c: 'P12D': undefined identifier
*** ERROR C202 IN LINE 901 OF ..\Code\function.c: 'P11D': undefined identifier
 902   5      
 903   5                          SetPWM1_Out(SpeedKeyTime, 0);  //ucDebugSpeaker = 7;//Êä³ö¿ØÖÆ·äÃùÆ÷½Ð
 904   5                          strPeripheral.ucPowerLedShowPhase = 1;
 905   5                          strPeripheral.ucPowerLedNum = 0;
 906   5                          break;
 907   5                      case 1:
 908   5                          if(0x40 == (ucBatType & 0x40)) //Èç¹ûÊÇï®µçÄ£Ê½
 909   5                          {
 910   6                              if(strPeripheral.ucPowerLedNum < 2)
 911   6                              {
 912   7                                  if(strPeripheral.ucPowerLedNum  == 0)
 913   7                                  {
 914   8                                      POWER_SHOW_5;
*** ERROR C202 IN LINE 914 OF ..\Code\function.c: 'P21D': undefined identifier
*** ERROR C202 IN LINE 914 OF ..\Code\function.c: 'P24D': undefined identifier
*** ERROR C202 IN LINE 914 OF ..\Code\function.c: 'P27D': undefined identifier
*** ERROR C202 IN LINE 914 OF ..\Code\function.c: 'P26D': undefined identifier
*** ERROR C202 IN LINE 914 OF ..\Code\function.c: 'P10D': undefined identifier
 915   8                                      SPEED_LED_5;
*** ERROR C202 IN LINE 915 OF ..\Code\function.c: 'P00D': undefined identifier
*** ERROR C202 IN LINE 915 OF ..\Code\function.c: 'P01D': undefined identifier
*** ERROR C202 IN LINE 915 OF ..\Code\function.c: 'P14D': undefined identifier
*** ERROR C202 IN LINE 915 OF ..\Code\function.c: 'P12D': undefined identifier
*** ERROR C202 IN LINE 915 OF ..\Code\function.c: 'P11D': undefined identifier
C51 COMPILER V9.59.0.0   FUNCTION                                                          09/26/2022 12:26:49 PAGE 19  

 916   8                                      SetPWM1_Out(SpeedKeyTime, SpeedKeyPulse);  //Êä³ö¿ØÖÆ·äÃùÆ÷½Ð
 917   8                                  }
 918   7                                  else
 919   7                                  {
 920   8                                      POWER_SHOW_0;
*** ERROR C202 IN LINE 920 OF ..\Code\function.c: 'P21D': undefined identifier
*** ERROR C202 IN LINE 920 OF ..\Code\function.c: 'P24D': undefined identifier
*** ERROR C202 IN LINE 920 OF ..\Code\function.c: 'P27D': undefined identifier
*** ERROR C202 IN LINE 920 OF ..\Code\function.c: 'P26D': undefined identifier
*** ERROR C202 IN LINE 920 OF ..\Code\function.c: 'P10D': undefined identifier
 921   8                                      SPEED_LED_0;
*** ERROR C202 IN LINE 921 OF ..\Code\function.c: 'P00D': undefined identifier
*** ERROR C202 IN LINE 921 OF ..\Code\function.c: 'P01D': undefined identifier
*** ERROR C202 IN LINE 921 OF ..\Code\function.c: 'P14D': undefined identifier
*** ERROR C202 IN LINE 921 OF ..\Code\function.c: 'P12D': undefined identifier
*** ERROR C202 IN LINE 921 OF ..\Code\function.c: 'P11D': undefined identifier
 922   8                                      SetPWM1_Out(SpeedKeyTime, 0);//ucDebugSpeaker = 8;
 923   8                                  }
 924   7                                  strPeripheral.ucPowerLedNum++;
 925   7                              }
 926   6                              else
 927   6                              {
 928   7                                  strPeripheral.ucPowerLedNum = 0;
 929   7                                  SetPWM1_Out(SpeedKeyTime, SpeedKeyPulse);  //Êä³ö¿ØÖÆ·äÃùÆ÷½Ð
 930   7                                  strPeripheral.ucPowerLedShowPhase = 2;
 931   7                              }
 932   6                          }
 933   5                          else//Ç¦Ëáµç³ØÃù½ÐÒ»´Î
 934   5                          {
 935   6                              POWER_SHOW_5;
*** ERROR C202 IN LINE 935 OF ..\Code\function.c: 'P21D': undefined identifier
*** ERROR C202 IN LINE 935 OF ..\Code\function.c: 'P24D': undefined identifier
*** ERROR C202 IN LINE 935 OF ..\Code\function.c: 'P27D': undefined identifier
*** ERROR C202 IN LINE 935 OF ..\Code\function.c: 'P26D': undefined identifier
*** ERROR C202 IN LINE 935 OF ..\Code\function.c: 'P10D': undefined identifier
 936   6                              SPEED_LED_5;
*** ERROR C202 IN LINE 936 OF ..\Code\function.c: 'P00D': undefined identifier
*** ERROR C202 IN LINE 936 OF ..\Code\function.c: 'P01D': undefined identifier
*** ERROR C202 IN LINE 936 OF ..\Code\function.c: 'P14D': undefined identifier
*** ERROR C202 IN LINE 936 OF ..\Code\function.c: 'P12D': undefined identifier
*** ERROR C202 IN LINE 936 OF ..\Code\function.c: 'P11D': undefined identifier
 937   6                              SetPWM1_Out(SpeedKeyTime, SpeedKeyPulse);  //Êä³ö¿ØÖÆ·äÃùÆ÷½Ð
 938   6                              strPeripheral.ucPowerLedShowPhase = 2;
 939   6                          }
 940   5                          //                            if(strPeripheral.ucPowerLedNum < 6)
 941   5                          //                            {
 942   5                          //                                PowerLedNumOn(strPeripheral.ucPowerLedNum);
 943   5                          //                                SpeedLedOn(ucSpeedGrad);
 944   5                          //                                SetPWM1_Out(SpeedKeyTime, SpeedKeyPulse);  //Êä³ö¿ØÖÆ·äÃùÆ÷½Ð
 945   5                          //                                  strPeripheral.ucPowerLedNum ++;
 946   5                          //                            }
 947   5                          //                            else  strPeripheral.ucPowerLedShowPhase = 2;
 948   5                          break;
 949   5                      case 2:
 950   5                          //µçÁ¿µÆ,ËÙ¶ÈµÆÈ«Ãð
 951   5                          POWER_SHOW_0;
*** ERROR C202 IN LINE 951 OF ..\Code\function.c: 'P21D': undefined identifier
*** ERROR C202 IN LINE 951 OF ..\Code\function.c: 'P24D': undefined identifier
*** ERROR C202 IN LINE 951 OF ..\Code\function.c: 'P27D': undefined identifier
*** ERROR C202 IN LINE 951 OF ..\Code\function.c: 'P26D': undefined identifier
*** ERROR C202 IN LINE 951 OF ..\Code\function.c: 'P10D': undefined identifier
 952   5                          SetPWM1_Out(SpeedKeyTime, 0);//ucDebugSpeaker = 9;
C51 COMPILER V9.59.0.0   FUNCTION                                                          09/26/2022 12:26:49 PAGE 20  

 953   5                          strPeripheral.ucPowerLedShowPhase = 3;
 954   5                          break;
 955   5                      case 3:
 956   5                          //µçÁ¿µÆ
 957   5                          POWER_SHOW_5;
*** ERROR C202 IN LINE 957 OF ..\Code\function.c: 'P21D': undefined identifier
*** ERROR C202 IN LINE 957 OF ..\Code\function.c: 'P24D': undefined identifier
*** ERROR C202 IN LINE 957 OF ..\Code\function.c: 'P27D': undefined identifier
*** ERROR C202 IN LINE 957 OF ..\Code\function.c: 'P26D': undefined identifier
*** ERROR C202 IN LINE 957 OF ..\Code\function.c: 'P10D': undefined identifier
 958   5                          //PowerLedOn(strPeripheral.uiRecvPowerValue); //ÏÔÊ¾µçÁ¿
 959   5                          //µãÁÁËÙ¶ÈµÆ
 960   5                          SpeedLedOn(ucSpeedGrad);   //
 961   5                          strPeripheral.ucPowerLedShowPhase = 0;
 962   5                          strPeripheral.usRecvPowerON_Flag = 0x03;      //Ö»Ö´ÐÐÒ»´Î£¨¿ª»úÊ±Ö´ÐÐ£©
 963   5                          strPeripheral.ucPowerLedShowPhase = 0;
 964   5                          ucBeep_Alarm_Phase = 0;
 965   5                          ucBeep_Alarm_Num = 0;
 966   5                          ucLessThanLowPower = 0;
 967   5                          strPeripheral.ucPowerLedNum  = 0;
 968   5                          break;
 969   5                      }
 970   4                  }
 971   3              }
 972   2              /*******¼ì²âÊÇ·ñ³äµçÖÐ*******/
 973   2              else if (TRUE == strPeripheral.ucRecvOrderInCharge)
 974   2              {
 975   3                  if(strPeripheral.PowerLEDShowTime > TIMER_300MS)
 976   3                  {
 977   4                      strPeripheral.ucPowerLedNum %= 5;
 978   4                      strPeripheral.ucPowerLedNum++;
 979   4                      SPEED_LED_5;
*** ERROR C202 IN LINE 979 OF ..\Code\function.c: 'P00D': undefined identifier
*** ERROR C202 IN LINE 979 OF ..\Code\function.c: 'P01D': undefined identifier
*** ERROR C202 IN LINE 979 OF ..\Code\function.c: 'P14D': undefined identifier
*** ERROR C202 IN LINE 979 OF ..\Code\function.c: 'P12D': undefined identifier
*** ERROR C202 IN LINE 979 OF ..\Code\function.c: 'P11D': undefined identifier
 980   4                      PowerLedNumOn(strPeripheral.ucPowerLedNum);
 981   4                      strPeripheral.PowerLEDShowTime = 0;
 982   4                  }
 983   3              }
 984   2              else if(strPeripheral.ucRecvAlarmNum)//ÓÐ¹ÊÕÏ
 985   2              {
 986   3                  switch(ucBeep_Alarm_Phase)
 987   3                  {
 988   4                  case 0:
 989   4                      SetPWM1_Out(SpeedKeyTime, 0);//ucDebugSpeaker = 10;
 990   4                      SPEED_LED_0;
*** ERROR C202 IN LINE 990 OF ..\Code\function.c: 'P00D': undefined identifier
*** ERROR C202 IN LINE 990 OF ..\Code\function.c: 'P01D': undefined identifier
*** ERROR C202 IN LINE 990 OF ..\Code\function.c: 'P14D': undefined identifier
*** ERROR C202 IN LINE 990 OF ..\Code\function.c: 'P12D': undefined identifier
*** ERROR C202 IN LINE 990 OF ..\Code\function.c: 'P11D': undefined identifier
 991   4                      POWER_SHOW_0;
*** ERROR C202 IN LINE 991 OF ..\Code\function.c: 'P21D': undefined identifier
*** ERROR C202 IN LINE 991 OF ..\Code\function.c: 'P24D': undefined identifier
*** ERROR C202 IN LINE 991 OF ..\Code\function.c: 'P27D': undefined identifier
*** ERROR C202 IN LINE 991 OF ..\Code\function.c: 'P26D': undefined identifier
*** ERROR C202 IN LINE 991 OF ..\Code\function.c: 'P10D': undefined identifier
 992   4                      ucBeep_Alarm_Phase = 1;
 993   4                      break;
 994   4                  case 1:
C51 COMPILER V9.59.0.0   FUNCTION                                                          09/26/2022 12:26:49 PAGE 21  

 995   4                      if(strPeripheral.PowerLEDShowTime >= TIMER_400MS)
 996   4                      {
 997   5                          SetPWM1_Out(SpeedKeyTime, SpeedKeyPulse); //·äÃùÆ÷ÏìÒ»Éù
 998   5                          POWER_SHOW_5;                      //µçÁ¿µÆÈ«ÁÁ
*** ERROR C202 IN LINE 998 OF ..\Code\function.c: 'P21D': undefined identifier
*** ERROR C202 IN LINE 998 OF ..\Code\function.c: 'P24D': undefined identifier
*** ERROR C202 IN LINE 998 OF ..\Code\function.c: 'P27D': undefined identifier
*** ERROR C202 IN LINE 998 OF ..\Code\function.c: 'P26D': undefined identifier
*** ERROR C202 IN LINE 998 OF ..\Code\function.c: 'P10D': undefined identifier
 999   5                          strPeripheral.PowerLEDShowTime = 0;
1000   5                          ucBeep_Alarm_Phase = 2;
1001   5                      }
1002   4                      break;
1003   4                  case 2:
1004   4                      if(strPeripheral.ucRecvAlarmNum < 0x80)
1005   4                      {
1006   5                          if(strPeripheral.PowerLEDShowTime >= TIMER_400MS)
1007   5                          {
1008   6                              SetPWM1_Out(0, 0); //·äÃùÆ÷ÏìÒ»Éù
1009   6                              POWER_SHOW_0;                      //µçÁ¿µÆÈ«ÁÁ
*** ERROR C202 IN LINE 1009 OF ..\Code\function.c: 'P21D': undefined identifier
*** ERROR C202 IN LINE 1009 OF ..\Code\function.c: 'P24D': undefined identifier
*** ERROR C202 IN LINE 1009 OF ..\Code\function.c: 'P27D': undefined identifier
*** ERROR C202 IN LINE 1009 OF ..\Code\function.c: 'P26D': undefined identifier
*** ERROR C202 IN LINE 1009 OF ..\Code\function.c: 'P10D': undefined identifier
1010   6                              strPeripheral.PowerLEDShowTime = 0;
1011   6                              ucBeep_Alarm_Num++;
1012   6                              if(ucBeep_Alarm_Num < strPeripheral.ucRecvAlarmNum)
1013   6                                  ucBeep_Alarm_Phase = 1;
1014   6                              else
1015   6                                  ucBeep_Alarm_Phase = 3;
1016   6                          }
1017   5                      }
1018   4                      else
1019   4                      {
1020   5                          if(strPeripheral.PowerLEDShowTime >= TIMER_200MS)
1021   5                          {
1022   6                              SetPWM1_Out(0, 0); //·äÃùÆ÷ÏìÒ»Éù
1023   6                              POWER_SHOW_0;                      //µçÁ¿µÆÈ«ÁÁ
*** ERROR C202 IN LINE 1023 OF ..\Code\function.c: 'P21D': undefined identifier
*** ERROR C202 IN LINE 1023 OF ..\Code\function.c: 'P24D': undefined identifier
*** ERROR C202 IN LINE 1023 OF ..\Code\function.c: 'P27D': undefined identifier
*** ERROR C202 IN LINE 1023 OF ..\Code\function.c: 'P26D': undefined identifier
*** ERROR C202 IN LINE 1023 OF ..\Code\function.c: 'P10D': undefined identifier
1024   6                              strPeripheral.PowerLEDShowTime = 0;
1025   6                              ucBeep_Alarm_Num++;
1026   6                              if(ucBeep_Alarm_Num < (strPeripheral.ucRecvAlarmNum - 0x80))
1027   6                                  ucBeep_Alarm_Phase = 1;
1028   6                              else
1029   6                                  ucBeep_Alarm_Phase = 3;
1030   6                          }
1031   5                      }
1032   4                      break;
1033   4                  case 3:
1034   4                      if(strPeripheral.PowerLEDShowTime >= TIMER_1S)
1035   4                      {
1036   5                          ucBeep_Alarm_Phase = 0;
1037   5                          strPeripheral.PowerLEDShowTime = 0;
1038   5                          ucBeep_Alarm_Num = 0;
1039   5                      }
1040   4                      break;
1041   4                  }
C51 COMPILER V9.59.0.0   FUNCTION                                                          09/26/2022 12:26:49 PAGE 22  

1042   3              }
1043   2              else if(strPeripheral.ucRecvTestFlag)
1044   2              {
1045   3                  switch(ucBeep_Alarm_Phase)
1046   3                  {
1047   4                  case 0:
1048   4                      if(strPeripheral.PowerLEDShowTime >= TIMER_400MS)
1049   4                      {
1050   5                          SetPWM1_Out(SpeedKeyTime, 0);//ucDebugSpeaker = 11;
1051   5                          ucBeep_Alarm_Phase = 1;
1052   5                          strPeripheral.PowerLEDShowTime = 0;
1053   5                      }
1054   4                      break;
1055   4                  case 1:
1056   4                      if(strPeripheral.PowerLEDShowTime >= TIMER_20MS)
1057   4                      {
1058   5                          SetPWM1_Out(SpeedKeyTime, SpeedKeyPulse); //·äÃùÆ÷ÏìÒ»Éù
1059   5                          strPeripheral.PowerLEDShowTime = 0;
1060   5                          ucBeep_Alarm_Phase = 2;
1061   5                      }
1062   4                      break;
1063   4                  case 2:
1064   4                      if(strPeripheral.PowerLEDShowTime >= TIMER_20MS)
1065   4                      {
1066   5                          SetPWM1_Out(0, 0); //·äÃùÆ÷ÏìÒ»Éù
1067   5                          strPeripheral.PowerLEDShowTime = 0;
1068   5                          ucBeep_Alarm_Num++;
1069   5                          if(ucBeep_Alarm_Num < 7)
1070   5                              ucBeep_Alarm_Phase = 1;
1071   5                          else
1072   5                              ucBeep_Alarm_Phase = 3;
1073   5                      }
1074   4      
1075   4                      break;
1076   4                  case 3:
1077   4                      if(strPeripheral.PowerLEDShowTime >= TIMER_1S)
1078   4                      {
1079   5                          ucBeep_Alarm_Phase = 0;
1080   5                          strPeripheral.PowerLEDShowTime = 0;
1081   5                          ucBeep_Alarm_Num = 0;
1082   5                      }
1083   4                      break;
1084   4                  default:
1085   4                      ucBeep_Alarm_Phase = 0;
1086   4                      strPeripheral.PowerLEDShowTime = 0;
1087   4                      ucBeep_Alarm_Num = 0;
1088   4                      break;
1089   4                  }
1090   3                  vTestShowLed(strPeripheral.usRecvLedTmp);
1091   3              }
1092   2      #ifdef EnableCancelBackCarAlarm
1093   2              else if((strPeripheral.Input.Bits.SpeedModify) || (strPeripheral.Input.Bits.PowerChange)|| (strPer
             -ipheral.Input.Bits.BackCarAlarmModify))
1094   2              {
1095   3                  if(strPeripheral.PowerLEDShowTime > TIMER_200MS)
1096   3                  {
1097   4                      strPeripheral.PowerLEDShowTime = 0;
1098   4                      if(strPeripheral.Input.Bits.BackCarAlarmModify)
1099   4                      {
1100   5                              if(ucEepromBuf[0])
1101   5                              {
1102   6                                  if(strPeripheral.ucPowerLedNum < 6)
C51 COMPILER V9.59.0.0   FUNCTION                                                          09/26/2022 12:26:49 PAGE 23  

1103   6                                  {
1104   7                                      strPeripheral.ucPowerLedNum++;
1105   7                                  }
1106   6                                  else strPeripheral.ucPowerLedNum = 0;                         
1107   6                              }
1108   5                              else
1109   5                              {
1110   6                                  if(strPeripheral.ucPowerLedNum > 0)
1111   6                                  {
1112   7                                      strPeripheral.ucPowerLedNum--;
1113   7                                  }
1114   6                                  else strPeripheral.ucPowerLedNum = 5;
1115   6                              }
1116   5                              ucSpeedGrad = strPeripheral.ucPowerLedNum;
1117   5                              SpeedLedOn(ucSpeedGrad);  //ÏÔÊ¾ËÙ¶È
1118   5                              PowerLedNumOn(strPeripheral.ucPowerLedNum);
1119   5                      }
1120   4                      else
1121   4                      {
1122   5                          if((ucEepromBuf[2] & 0x40) == 0x40)//ï®µç³Ø
1123   5                          {
1124   6                              if(strPeripheral.ucPowerLedNum < 6)
1125   6                              {
1126   7                                  strPeripheral.ucPowerLedNum++;
1127   7                              }
1128   6                              else strPeripheral.ucPowerLedNum = 0;
1129   6                          }
1130   5                          else//Ç¦Ëáµç³Ø
1131   5                          {
1132   6                              if(strPeripheral.ucPowerLedNum > 0)
1133   6                              {
1134   7                                  strPeripheral.ucPowerLedNum--;
1135   7                              }
1136   6                              else strPeripheral.ucPowerLedNum = 5;
1137   6                          }
1138   5                          PowerLedNumOn(strPeripheral.ucPowerLedNum);
1139   5                      }
1140   4                  }
1141   3              }
1142   2      #else         
                      else if((strPeripheral.Input.Bits.SpeedModify) || (strPeripheral.Input.Bits.PowerChange))
                      {
                          if(strPeripheral.PowerLEDShowTime > TIMER_200MS)
                          {
                              strPeripheral.PowerLEDShowTime = 0;
                              if((ucEepromBuf[2] & 0x40) == 0x40)//ï®µç³Ø
                              {
                                  if(strPeripheral.ucPowerLedNum < 6)
                                  {
                                      strPeripheral.ucPowerLedNum++;
                                  }
                                  else strPeripheral.ucPowerLedNum = 0;
                              }
                              else//Ç¦Ëáµç³Ø
                              {
                                  if(strPeripheral.ucPowerLedNum > 0)
                                  {
                                      strPeripheral.ucPowerLedNum--;
                                  }
                                  else strPeripheral.ucPowerLedNum = 5;
              
                              }
C51 COMPILER V9.59.0.0   FUNCTION                                                          09/26/2022 12:26:49 PAGE 24  

                              PowerLedNumOn(strPeripheral.ucPowerLedNum);
                          }
                      }
              #endif        
1169   2              else //²»ÔÚ³äµçÖÐ ²¢ÇÒÎÞ¹ÊÕÏ Õý³£ÏÔÊ¾µçÁ¿
1170   2              {
1171   3                  ucBeep_Alarm_Phase = 0;
1172   3                  ucBeep_Alarm_Num = 0;
1173   3                  if(TRUE == strPeripheral.usRecvPowerOFF_Flag)//¹Ø»ú
1174   3                  {
1175   4                      if(GLOBAL_SPEED_GRAD != ucSpeedGrad)
1176   4                      {
1177   5                          EEPROM_WriteByte(SPEED_ADDRESS, ucSpeedGrad);
1178   5                          ucSpeedGrad = GLOBAL_SPEED_GRAD;
1179   5                      }
1180   4                      SPEED_LED_0;   //¹Ø±ÕËÙ¶ÈµÆ
*** ERROR C202 IN LINE 1180 OF ..\Code\function.c: 'P00D': undefined identifier
*** ERROR C202 IN LINE 1180 OF ..\Code\function.c: 'P01D': undefined identifier
*** ERROR C202 IN LINE 1180 OF ..\Code\function.c: 'P14D': undefined identifier
*** ERROR C202 IN LINE 1180 OF ..\Code\function.c: 'P12D': undefined identifier
*** ERROR C202 IN LINE 1180 OF ..\Code\function.c: 'P11D': undefined identifier
1181   4                      POWER_SHOW_0;  //¹Ø±ÕµçÔ´µÆ
*** ERROR C202 IN LINE 1181 OF ..\Code\function.c: 'P21D': undefined identifier
*** ERROR C202 IN LINE 1181 OF ..\Code\function.c: 'P24D': undefined identifier
*** ERROR C202 IN LINE 1181 OF ..\Code\function.c: 'P27D': undefined identifier
*** ERROR C202 IN LINE 1181 OF ..\Code\function.c: 'P26D': undefined identifier
*** ERROR C202 IN LINE 1181 OF ..\Code\function.c: 'P10D': undefined identifier
1182   4                      strPeripheral.ucPowerLedShowPhase = 0;
1183   4                      strPeripheral.ucRecvData_Flag = FALSE;
1184   4                      strPeripheral.PowerLEDShowTime = 0;
1185   4                      strPeripheral.ucRecvPowerValue_Flag = 0;
1186   4                  }
1187   3                  else if(strPeripheral.ucRecvPowerValue_Flag)//(strPeripheral.PowerLEDShowTime > TIMER_300MS)
1188   3                  {
1189   4                      PowerLedOn(strPeripheral.uiRecvPowerValue); //ÏÔÊ¾µçÁ¿
1190   4                      SpeedLedOn(ucSpeedGrad);  //ÏÔÊ¾ËÙ¶È
1191   4                  }
1192   3              }
1193   2              /*******·äÃùÆ÷*******/
1194   2      
1195   2              if(Globle_Timer_1MS.Bits.Beep_Alarm)
1196   2              {
1197   3                  Globle_Timer_1MS.Bits.Beep_Alarm = 0;
1198   3                  if ((TRUE == strPeripheral.ucRecvBikeInBack) && (TRUE != strPeripheral.ucRecvOrderInCharge) &&
             - (FALSE == ucBuzzerPressedFlg) && (0 == strPeripheral.ucRecvAlarmNum) )
1199   3                  {
1200   4                      strPeripheral.BackSpeekTime++;
1201   4                  }
1202   3                  if(strPeripheral.Output.Bits.Alarm)
1203   3                  {
1204   4                      strPeripheral.AlarmTime++;
1205   4                  }
1206   3              }
1207   2              if(strPeripheral.BackSpeekTime > TIMER_600MS)
1208   2              {
1209   3                  strPeripheral.BackSpeekTime = 0;
1210   3                  if(ucBackSpeekFlag)
1211   3                  {
1212   4                      SetPWM1_Out(InBackTime, InBackPulse);
1213   4                      ucBackSpeekFlag = FALSE;
1214   4                  }
1215   3                  else
C51 COMPILER V9.59.0.0   FUNCTION                                                          09/26/2022 12:26:49 PAGE 25  

1216   3                  {
1217   4                      SetPWM1_Out(SpeedKeyTime, 0);//ucDebugSpeaker = 12;
1218   4                      ucBackSpeekFlag = TRUE;
1219   4                  }
1220   3              }
1221   2              if(strPeripheral.AlarmTime > TIMER_100MS)
1222   2              {
1223   3                  strPeripheral.AlarmTime = 0;
1224   3                  if(FALSE == strPeripheral.Input.Bits.SpeakerKey)SetPWM1_Out(SpeedKeyTime, 0);//ucDebugSpeaker 
             -= 13;
1225   3                  strPeripheral.Output.Bits.Alarm = 0;
1226   3              }
1227   2          }//´®¿ÚÍ¨ÐÅºóÖ´ÐÐ
1228   1      }
1229          void vSpeakershutOut(void)
1230          {
1231   1          if(usReadSpeakerPwm() && Globle_Timer_1MS.Bits.CheckIDele)
1232   1          {
1233   2              Globle_Timer_1MS.Bits.CheckIDele = 0;
1234   2              if((0 == strPeripheral.ucRecvBikeInBack) && (0 == ucLess18Power) &&
1235   2                      (0 == strPeripheral.ucRecvAlarmNum) &&  (FALSE == ucBuzzerTstFlg) && (FALSE == ucBuzzerPre
             -ssedFlg) &&
1236   2                      (0 == ucKeyPressFlag) &&  (0 == strPeripheral.ucRecvWrite60Bytes_Flag) && (0x03 == strPeri
             -pheral.usRecvPowerON_Flag) &&
1237   2                      (0 == strPeripheral.SpeakerAndSpeedUpTime) && (0 == strPeripheral.SpeedDownAndUpTime) && (
             -0 == strPeripheral.SpeedDownKeyTime) &&
1238   2                      (0 == strPeripheral.SpeedUpKeyTime) )
1239   2              {
1240   3                  SetPWM1_Out(SpeedKeyTime, 0);//ucDebugSpeaker = 14;
1241   3                  for(ucKeyPressFlag = 0; ucKeyPressFlag < 60; ucKeyPressFlag++)
1242   3                  {
1243   4                      Globle_Timer_1MS.Bits.CheckIDele  = 0;
1244   4                      while(0 == Globle_Timer_1MS.Bits.CheckIDele);
1245   4                  }
1246   3                  vSendBuzzerOrder(0x02);
1247   3                  Globle_Timer_1MS.Bits.CheckIDele = ucKeyPressFlag = 0;
1248   3              }
1249   2          }
1250   1      }
1251          #ifdef BatteryAutoShiBie
1252          void PeripheralHandle(void)
1253          {
1254   1          PeripheralOutputHandle();//µçÁ¿Ö¸Ê¾µÆ¡¢ËÙ¶ÈÖ¸Ê¾µÆ¡¢·äÃùÆ÷¡¢EEPROM
1255   1      
1256   1          if(0x03 == strPeripheral.ucRecvData_Flag)    //´®¿ÚÍ¨ÐÅ¸³Öµ0X03
1257   1          {
1258   2              if(strPeripheral.uiRecvPowerValue)//µçÁ¿²»ÎªÁãÊ±²Å¼ì²â°´¼ü
1259   2              {
1260   3                  PeripheralInputHandle();
1261   3              }
1262   2      
1263   2              ////////////////////
1264   2              //        if(4 == ucSpeedGrad)
1265   2              //        {
1266   2              //          ucTestBeep = 100;
1267   2              //        }
1268   2              //        if(ucTestBeep)
1269   2              //        {
1270   2              //            SetPWM1_Out(SpeedKeyTime, ucTestBeep);
1271   2              //            ucTestBeep = 0;
1272   2              //        }
1273   2              ////////////////////////
C51 COMPILER V9.59.0.0   FUNCTION                                                          09/26/2022 12:26:49 PAGE 26  

1274   2              vSpeakershutOut();
1275   2          }
1276   1      }
1277          #endif
1278          
1279          #ifdef OldZuHeAnjian
              void PeripheralHandle(void)
              {
                  PeripheralOutputHandle();//µçÁ¿Ö¸Ê¾µÆ¡¢ËÙ¶ÈÖ¸Ê¾µÆ¡¢·äÃùÆ÷¡¢EEPROM
              
                  if(0x03 == strPeripheral.ucRecvData_Flag)    //´®¿ÚÍ¨ÐÅ¸³Öµ0X03
                  {
                      if(strPeripheral.uiRecvPowerValue)//µçÁ¿²»ÎªÁãÊ±²Å¼ì²â°´¼ü
                      {
                          PeripheralInputHandle();
                      }
                      vSpeakershutOut();
                  }
              }
              #endif
1294          
1295          #ifdef YueYueZuHeAnjian
              void PeripheralHandle(void)
              {
                  PeripheralOutputHandle();//µçÁ¿Ö¸Ê¾µÆ¡¢ËÙ¶ÈÖ¸Ê¾µÆ¡¢·äÃùÆ÷¡¢EEPROM
              
                  if(0x03 == strPeripheral.ucRecvData_Flag)    //´®¿ÚÍ¨ÐÅ¸³Öµ0X03
                  {
                      if(strPeripheral.uiRecvPowerValue)//µçÁ¿²»ÎªÁãÊ±²Å¼ì²â°´¼ü
                      {
                          PeripheralInputHandle();
                      }
                      vSpeakershutOut();
                  }
              }
              #endif
1310          
1311          /************************************************
1312          ;  *    @Function Name       : EEPROM_Byte_Erase
1313          ;  *    @Description         : eeprom×Ö²Á³ýÄ£Ê½³õÊ¼»¯
1314          ;  *    @IN_Parameter        :addar 0-0x3ff W_data Êý¾Ý
1315          ;  *    @Return parameter    :
1316          ;  ***********************************************/
1317          void EEPROM_Byte_Erase(unsigned int addar)
1318          {
1319   1          clr_EA;
*** ERROR C202 IN LINE 1319 OF ..\Code\function.c: 'EA': undefined identifier
1320   1          SET_IAPEN();
*** ERROR C202 IN LINE 1320 OF ..\Code\function.c: 'IAPMD': undefined identifier
1321   1          SET_IAPEN(); //´ò¿ªFALSH IAP¹¦ÄÜ£¬Á¬ÐøÐ´Á½±éÓÐÐ§
*** ERROR C202 IN LINE 1321 OF ..\Code\function.c: 'IAPMD': undefined identifier
1322   1          SET_EPAGEERS();
*** ERROR C202 IN LINE 1322 OF ..\Code\function.c: 'IAPMD': undefined identifier
1323   1          SET_EPAGEERS(); //Ò³²ÁÄ£Ê½
*** ERROR C202 IN LINE 1323 OF ..\Code\function.c: 'IAPMD': undefined identifier
1324   1          IAPKEY = 0x5a;
*** ERROR C202 IN LINE 1324 OF ..\Code\function.c: 'IAPKEY': undefined identifier
1325   1          IAPKEY = 0xa5;
*** ERROR C202 IN LINE 1325 OF ..\Code\function.c: 'IAPKEY': undefined identifier
1326   1          SET_IAPSTR(); //IAPSTRÎ»ÖÃÒ»£¬Æô¶¯IAP²Ù×÷
*** ERROR C202 IN LINE 1326 OF ..\Code\function.c: 'IAPCR': undefined identifier
1327   1          IAPADH = (addar >> 8) & 0xff;
C51 COMPILER V9.59.0.0   FUNCTION                                                          09/26/2022 12:26:49 PAGE 27  

*** ERROR C202 IN LINE 1327 OF ..\Code\function.c: 'IAPADH': undefined identifier
1328   1          IAPADL = addar & 0xff;
*** ERROR C202 IN LINE 1328 OF ..\Code\function.c: 'IAPADL': undefined identifier
1329   1          IAPDB = 0;
*** ERROR C202 IN LINE 1329 OF ..\Code\function.c: 'IAPDB': undefined identifier
1330   1          IAPADL &= 0xf0;
*** ERROR C202 IN LINE 1330 OF ..\Code\function.c: 'IAPADL': undefined identifier
1331   1          IAPKEY = 0x5a;
*** ERROR C202 IN LINE 1331 OF ..\Code\function.c: 'IAPKEY': undefined identifier
1332   1          IAPKEY = 0xa5;
*** ERROR C202 IN LINE 1332 OF ..\Code\function.c: 'IAPKEY': undefined identifier
1333   1          SET_IAPTRIG0(); //IAPTRIG0ÖÃÒ»
*** ERROR C202 IN LINE 1333 OF ..\Code\function.c: 'IAPCR': undefined identifier
1334   1          IAPKEY = 0x5a;
*** ERROR C202 IN LINE 1334 OF ..\Code\function.c: 'IAPKEY': undefined identifier
1335   1          IAPKEY = 0xa5;
*** ERROR C202 IN LINE 1335 OF ..\Code\function.c: 'IAPKEY': undefined identifier
1336   1          SET_IAPTRIG1(); //IAPTRIG1ÖÃÒ»
*** ERROR C202 IN LINE 1336 OF ..\Code\function.c: 'IAPCR': undefined identifier
1337   1          IAPKEY = 0x5a;
*** ERROR C202 IN LINE 1337 OF ..\Code\function.c: 'IAPKEY': undefined identifier
1338   1          IAPKEY = 0xa5;
*** ERROR C202 IN LINE 1338 OF ..\Code\function.c: 'IAPKEY': undefined identifier
1339   1          SET_IAPTRIG2(); //IAPTRIG1ÖÃÒ»
*** ERROR C202 IN LINE 1339 OF ..\Code\function.c: 'IAPCR': undefined identifier
1340   1          while (IAPCR & 0x80);
*** ERROR C202 IN LINE 1340 OF ..\Code\function.c: 'IAPCR': undefined identifier
1341   1      
1342   1      }
1343          /************************************************
1344          ;  *    @Function Name       : EEPROM_Init_Byte_Write
1345          ;  *    @Description         : eeprom×Ö½ÚÐ´
1346          ;  *    @IN_Parameter        : addar 0-0x3ff W_data Êý¾Ý
1347          ;  *    @Return parameter    :
1348          ;  ***********************************************/
1349          void EEPROM_Byte_Write(unsigned int addar, unsigned char W_data)
1350          {
1351   1      
1352   1          SET_IAPEN();
*** ERROR C202 IN LINE 1352 OF ..\Code\function.c: 'IAPMD': undefined identifier
1353   1          SET_IAPEN(); //´ò¿ªFALSH IAP¹¦ÄÜ£¬Á¬ÐøÐ´Á½±éÓÐÐ§
*** ERROR C202 IN LINE 1353 OF ..\Code\function.c: 'IAPMD': undefined identifier
1354   1          SET_EPAGEWR();
*** ERROR C202 IN LINE 1354 OF ..\Code\function.c: 'IAPMD': undefined identifier
1355   1          SET_EPAGEWR(); //Ò³Ð´Ä£Ê½
*** ERROR C202 IN LINE 1355 OF ..\Code\function.c: 'IAPMD': undefined identifier
1356   1          IAPKEY = 0x5a;
*** ERROR C202 IN LINE 1356 OF ..\Code\function.c: 'IAPKEY': undefined identifier
1357   1          IAPKEY = 0xa5;
*** ERROR C202 IN LINE 1357 OF ..\Code\function.c: 'IAPKEY': undefined identifier
1358   1          SET_IAPSTR(); //IAPSTRÎ»ÖÃÒ»£¬Æô¶¯IAP²Ù×÷
*** ERROR C202 IN LINE 1358 OF ..\Code\function.c: 'IAPCR': undefined identifier
1359   1          IAPADH = (addar >> 8) & 0xff;
*** ERROR C202 IN LINE 1359 OF ..\Code\function.c: 'IAPADH': undefined identifier
1360   1          IAPADL = addar & 0xff;
*** ERROR C202 IN LINE 1360 OF ..\Code\function.c: 'IAPADL': undefined identifier
1361   1          IAPDB = W_data; //W_data
*** ERROR C202 IN LINE 1361 OF ..\Code\function.c: 'IAPDB': undefined identifier
1362   1          IAPADL &= 0xf0;
*** ERROR C202 IN LINE 1362 OF ..\Code\function.c: 'IAPADL': undefined identifier
1363   1          IAPKEY = 0x5a;
*** ERROR C202 IN LINE 1363 OF ..\Code\function.c: 'IAPKEY': undefined identifier
C51 COMPILER V9.59.0.0   FUNCTION                                                          09/26/2022 12:26:49 PAGE 28  

1364   1          IAPKEY = 0xa5;
*** ERROR C202 IN LINE 1364 OF ..\Code\function.c: 'IAPKEY': undefined identifier
1365   1          SET_IAPTRIG0(); //IAPTRIG0ÖÃÒ»
*** ERROR C202 IN LINE 1365 OF ..\Code\function.c: 'IAPCR': undefined identifier
1366   1          IAPKEY = 0x5a;
*** ERROR C202 IN LINE 1366 OF ..\Code\function.c: 'IAPKEY': undefined identifier
1367   1          IAPKEY = 0xa5;
*** ERROR C202 IN LINE 1367 OF ..\Code\function.c: 'IAPKEY': undefined identifier
1368   1          SET_IAPTRIG1(); //IAPTRIG1ÖÃÒ»
*** ERROR C202 IN LINE 1368 OF ..\Code\function.c: 'IAPCR': undefined identifier
1369   1          IAPKEY = 0x5a;
*** ERROR C202 IN LINE 1369 OF ..\Code\function.c: 'IAPKEY': undefined identifier
1370   1          IAPKEY = 0xa5;
*** ERROR C202 IN LINE 1370 OF ..\Code\function.c: 'IAPKEY': undefined identifier
1371   1          SET_IAPTRIG2(); //IAPTRIG1ÖÃÒ»
*** ERROR C202 IN LINE 1371 OF ..\Code\function.c: 'IAPCR': undefined identifier
1372   1          while (IAPCR & 0x80);
*** ERROR C202 IN LINE 1372 OF ..\Code\function.c: 'IAPCR': undefined identifier
1373   1          set_EA;
*** ERROR C202 IN LINE 1373 OF ..\Code\function.c: 'EA': undefined identifier
1374   1      }
1375          /************************************************
1376          ;  *    @Function Name       : EEPROM_Byte_Read
1377          ;  *    @Description         : eeprom×Ö½Ú¶Á
1378          ;  *    @IN_Parameter        : addar 0-0x3ff
1379          ;  *    @Return parameter    : Êý¾Ý
1380          ;  ***********************************************/
1381          uint8_t EEPROM_Byte_Read(unsigned int addr)
1382          {
1383   1          uint8_t R_data;
1384   1          clr_EA;
*** ERROR C202 IN LINE 1384 OF ..\Code\function.c: 'EA': undefined identifier
1385   1          SET_EERD(); //EERDÖÃ1
*** ERROR C202 IN LINE 1385 OF ..\Code\function.c: 'IAPCR': undefined identifier
1386   1          R_data = *(uint8_t __IO code *)addr;
1387   1          CLR_EERD(); //EERDÇå0
*** ERROR C202 IN LINE 1387 OF ..\Code\function.c: 'IAPCR': undefined identifier
1388   1          set_EA;
*** ERROR C202 IN LINE 1388 OF ..\Code\function.c: 'EA': undefined identifier
1389   1          return R_data;
1390   1      
1391   1      }
1392          /************************************************
1393          ;  *    @Function Name       : EEPROM_Read
1394          ;  *    @Description         : EEPROM°´ÕÕ³¤¶È¶ÁÈ¡
1395          ;  *    @IN_Parameter        :
1396          ;  *    @Return parameter    :
1397          ;  ***********************************************/
1398          void EEPROM_Read(unsigned int addr, unsigned char idata *R_data, unsigned int len)
1399          {
1400   1          uint16_t cnt;
1401   1          clr_EA;
*** ERROR C202 IN LINE 1401 OF ..\Code\function.c: 'EA': undefined identifier
1402   1          SET_EERD(); //EERDÖÃ1
*** ERROR C202 IN LINE 1402 OF ..\Code\function.c: 'IAPCR': undefined identifier
1403   1          for (cnt = 0; cnt < len; cnt++)
1404   1          {
1405   2              R_data[cnt] = *(uint8_t __IO code *)addr;
1406   2              addr++;
1407   2          }
1408   1          CLR_EERD(); //EERDÇå0
*** ERROR C202 IN LINE 1408 OF ..\Code\function.c: 'IAPCR': undefined identifier
C51 COMPILER V9.59.0.0   FUNCTION                                                          09/26/2022 12:26:49 PAGE 29  

1409   1          set_EA;
*** ERROR C202 IN LINE 1409 OF ..\Code\function.c: 'EA': undefined identifier
1410   1      }
1411          
1412          
1413          void myFuncInit(){
1414   1          clr_EA;      //¹Ø±ÕÖÐ¶Ï
*** ERROR C202 IN LINE 1414 OF ..\Code\function.c: 'EA': undefined identifier
1415   1          GPIO_Init();
1416   1          Time0_Init();    
1417   1          PWM1_Init();
1418   1          vInitAdc();
1419   1          //Uart_Init();
1420   1          set_EA;      //´ò¿ªÖÐ¶Ï
*** ERROR C202 IN LINE 1420 OF ..\Code\function.c: 'EA': undefined identifier
1421   1      }
1422          void myFuncLed(){
1423   1        //µçÔ´µÆ
1424   1        //P21D = 1;//×ó1
1425   1        P24D = 1;//×ó2
*** ERROR C202 IN LINE 1425 OF ..\Code\function.c: 'P24D': undefined identifier
1426   1        //P27D = 1;//×ó3
1427   1        P26D = 1;//×ó4
*** ERROR C202 IN LINE 1427 OF ..\Code\function.c: 'P26D': undefined identifier
1428   1        //P10D = 1;//×ó5
1429   1        
1430   1        //ËÙ¶ÈµÆ
1431   1        P00D = 1;//×ó1
*** ERROR C202 IN LINE 1431 OF ..\Code\function.c: 'P00D': undefined identifier
1432   1        //P01D = 1;//×ó2
1433   1        P14D =1;//×ó3
*** ERROR C202 IN LINE 1433 OF ..\Code\function.c: 'P14D': undefined identifier
1434   1        //P12D = 1;//×ó4
1435   1        P11D = 1;//×ó5
*** ERROR C202 IN LINE 1435 OF ..\Code\function.c: 'P11D': undefined identifier
1436   1      }
1437          void MyFuncSpeaker(){
1438   1        
1439   1        unsigned short usReadSpeakerPwmFlag = 0;
1440   1        
1441   1        if(Globle_Timer_1MS.Bits.CheckKeyPress)
1442   1        {
1443   2            Globle_Timer_1MS.Bits.CheckKeyPress = 0;
1444   2            
1445   2            if(uiAdVoltage > 3350)//4096
1446   2            {
1447   3                ucKeyPressFlag = FALSE;
1448   3                strPeripheral.SpeedUpKeyTime = 0;
1449   3                strPeripheral.SpeedDownKeyTime = 0;
1450   3                strPeripheral.SpeakerKeyTime = 0;
1451   3                strPeripheral.SpeedDownAndUpTime = 0;
1452   3                strPeripheral.SpeakerAndSpeedUpTime = 0;
1453   3                strPeripheral.Input.Bits.SpeedDownKeyPressFlag =  0;
1454   3                ucBuzzerPressedFlg = FALSE;
1455   3            }
1456   2            else if((uiAdVoltage < 2164) && (uiAdVoltage > 1944))//
1457   2            {
1458   3                strPeripheral.SpeakerKeyTime++;
1459   3                strPeripheral.SpeedDownAndUpTime = 0;
1460   3                strPeripheral.SpeakerAndSpeedUpTime = 0;
1461   3                strPeripheral.Input.Bits.SpeedDownKeyPressFlag =  0;
1462   3                
C51 COMPILER V9.59.0.0   FUNCTION                                                          09/26/2022 12:26:49 PAGE 30  

1463   3                if(strPeripheral.SpeakerKeyTime > TIMER_20MS)
1464   3                {
1465   4                    strPeripheral.SpeakerKeyTime = TIMER_20MS;
1466   4                    strPeripheral.Input.Bits.SpeakerKey = TRUE;
1467   4                    //ucKeyPressFlag = TRUE;
1468   4                }
1469   3            }
1470   2            
1471   2            
1472   2            if(strPeripheral.Input.Bits.SpeakerKey)
1473   2              {
1474   3                  if (TRUE != strPeripheral.ucRecvOrderInCharge)
1475   3                  {
1476   4                      strPeripheral.Output.Bits.Alarm = TRUE;
1477   4                      SetPWM1_Out(LabaKeyPressSpeekTime, LabaKeyPressSpeekPulse);
1478   4                      //if(FALSE == ucBuzzerPressedFlg)vSendBuzzerOrder(0x01);
1479   4                      ucBuzzerPressedFlg = TRUE;
1480   4                  }else{
1481   4                      ucBuzzerPressedFlg = FALSE;
1482   4                  }
1483   3              }
1484   2          }
1485   1          usReadSpeakerPwmFlag =  usReadSpeakerPwm();
1486   1          if(usReadSpeakerPwmFlag && 0 == strPeripheral.SpeakerKeyTime)
1487   1          {
1488   2            SetPWM1_Out(0, 0);
1489   2      //        Globle_Timer_1MS.Bits.CheckIDele = 0;
1490   2      //        if((0 == strPeripheral.ucRecvBikeInBack) 
1491   2      //          && (0 == ucLess18Power) 
1492   2      //          &&(0 == strPeripheral.ucRecvAlarmNum) 
1493   2      //          && (FALSE == ucBuzzerTstFlg) 
1494   2      //          && (FALSE == ucBuzzerPressedFlg) 
1495   2      //          && (0 == ucKeyPressFlag) 
1496   2      //          && (0 == strPeripheral.ucRecvWrite60Bytes_Flag) 
1497   2      //          && (0x03 == strPeripheral.usRecvPowerON_Flag) 
1498   2      //          && (0 == strPeripheral.SpeakerAndSpeedUpTime) 
1499   2      //          && (0 == strPeripheral.SpeedDownAndUpTime) 
1500   2      //          && (0 == strPeripheral.SpeedDownKeyTime) 
1501   2      //          && (0 == strPeripheral.SpeedUpKeyTime) )
1502   2      //        {
1503   2      //            SetPWM1_Out(SpeedKeyTime, 0);//ucDebugSpeaker = 14;
1504   2      //            for(ucKeyPressFlag = 0; ucKeyPressFlag < 60; ucKeyPressFlag++)
1505   2      //            {
1506   2      //                Globle_Timer_1MS.Bits.CheckIDele  = 0;
1507   2      //                while(0 == Globle_Timer_1MS.Bits.CheckIDele);
1508   2      //            }
1509   2      //            vSendBuzzerOrder(0x02);
1510   2      //            Globle_Timer_1MS.Bits.CheckIDele = ucKeyPressFlag = 0;
1511   2      //        }
1512   2          }
1513   1        
1514   1      }

C51 COMPILATION COMPLETE.  1 WARNING(S),  304 ERROR(S)
